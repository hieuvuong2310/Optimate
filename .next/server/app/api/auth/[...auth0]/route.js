(()=>{var a={};a.id=863,a.ids=[863],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1589:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"NextResponse",{enumerable:!0,get:function(){return l}});let d=c(3675),e=c(8001),f=c(7679),g=c(3036),h=c(3675),i=Symbol("internal response"),j=new Set([301,302,303,307,308]);function k(a,b){var c;if(null==a||null==(c=a.request)?void 0:c.headers){if(!(a.request.headers instanceof Headers))throw Object.defineProperty(Error("request.headers must be an instance of Headers"),"__NEXT_ERROR_CODE",{value:"E119",enumerable:!1,configurable:!0});let c=[];for(let[d,e]of a.request.headers)b.set("x-middleware-request-"+d,e),c.push(d);b.set("x-middleware-override-headers",c.join(","))}}class l extends Response{constructor(a,b={}){super(a,b);let c=this.headers,j=new Proxy(new h.ResponseCookies(c),{get(a,e,f){switch(e){case"delete":case"set":return(...f)=>{let g=Reflect.apply(a[e],a,f),i=new Headers(c);return g instanceof h.ResponseCookies&&c.set("x-middleware-set-cookie",g.getAll().map(a=>(0,d.stringifyCookie)(a)).join(",")),k(b,i),g};default:return g.ReflectAdapter.get(a,e,f)}}});this[i]={cookies:j,url:b.url?new e.NextURL(b.url,{headers:(0,f.toNodeOutgoingHttpHeaders)(c),nextConfig:b.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[i].cookies}static json(a,b){let c=Response.json(a,b);return new l(c.body,c)}static redirect(a,b){let c="number"==typeof b?b:(null==b?void 0:b.status)??307;if(!j.has(c))throw Object.defineProperty(RangeError('Failed to execute "redirect" on "response": Invalid status code'),"__NEXT_ERROR_CODE",{value:"E529",enumerable:!1,configurable:!0});let d="object"==typeof b?b:{},e=new Headers(null==d?void 0:d.headers);return e.set("Location",(0,f.validateURL)(a)),new l(null,{...d,headers:e,status:c})}static rewrite(a,b){let c=new Headers(null==b?void 0:b.headers);return c.set("x-middleware-rewrite",(0,f.validateURL)(a)),k(b,c),new l(null,{...b,headers:c})}static next(a){let b=new Headers(null==a?void 0:a.headers);return b.set("x-middleware-next","1"),k(a,b),new l(null,{...a,headers:b})}}},2588:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"after",{enumerable:!0,get:function(){return e}});let d=c(9294);function e(a){let b=d.workAsyncStorage.getStore();if(!b)throw Object.defineProperty(Error("`after` was called outside a request scope. Read more: https://nextjs.org/docs/messages/next-dynamic-api-wrong-context"),"__NEXT_ERROR_CODE",{value:"E468",enumerable:!1,configurable:!0});let{afterContext:c}=b;return c.after(a)}},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3421:(a,b,c)=>{"use strict";Object.defineProperty(b,"I",{enumerable:!0,get:function(){return g}});let d=c(1237),e=c(5088),f=c(7679);async function g(a,b,c,g){if((0,d.isNodeNextResponse)(b)){var h;b.statusCode=c.status,b.statusMessage=c.statusText;let d=["set-cookie","www-authenticate","proxy-authenticate","vary"];null==(h=c.headers)||h.forEach((a,c)=>{if("x-middleware-set-cookie"!==c.toLowerCase())if("set-cookie"===c.toLowerCase())for(let d of(0,f.splitCookiesString)(a))b.appendHeader(c,d);else{let e=void 0!==b.getHeader(c);(d.includes(c.toLowerCase())||!e)&&b.appendHeader(c,a)}});let{originalResponse:i}=b;c.body&&"HEAD"!==a.method?await (0,e.pipeToNodeResponse)(c.body,i,g):i.end()}}},3535:(a,b,c)=>{"use strict";let d=c(3033),e=c(9294),f=c(6906),g=c(787),h=c(1938),i=c(9168),j=c(9290);c(3036);new WeakMap;(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})})},4230:(a,b,c)=>{"use strict";Object.defineProperty(b,"U",{enumerable:!0,get:function(){return n}});let d=c(8706),e=c(3675),f=c(9294),g=c(3033),h=c(6906),i=c(1938),j=c(2831),k=c(787),l=c(1716),m=c(9290);function n(){let a="cookies",b=f.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(b.forceStatic)return p(d.RequestCookiesAdapter.seal(new e.RequestCookies(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,n),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0});case"prerender":var k=b,q=c;let g=o.get(q);if(g)return g;let r=(0,j.makeHangingPromise)(q.renderSignal,k.route,"`cookies()`");return o.set(q,r),r;case"prerender-client":let s="`cookies`";throw Object.defineProperty(new m.InvariantError(`${s} must not be used within a client component. Next.js should be preventing ${s} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,h.delayUntilRuntimeStage)(c,function(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),c}(c.cookies));case"private-cache":return p(c.cookies);case"request":return(0,h.trackDynamicDataInDynamicRender)(c),p((0,d.areCookiesMutableInCurrentPhase)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.throwForMissingRequestStore)(a)}c(3036);let o=new WeakMap;function p(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),Object.defineProperties(c,{[Symbol.iterator]:{value:a[Symbol.iterator]?a[Symbol.iterator].bind(a):q.bind(a)},size:{get:()=>a.size},get:{value:a.get.bind(a)},getAll:{value:a.getAll.bind(a)},has:{value:a.has.bind(a)},set:{value:a.set.bind(a)},delete:{value:a.delete.bind(a)},clear:{value:"function"==typeof a.clear?a.clear.bind(a):r.bind(a,c)},toString:{value:a.toString.bind(a)}}),c}function q(){return this.getAll().map(a=>[a.name,a]).values()}function r(a){for(let a of this.getAll())this.delete(a.name);return a}(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})})},4603:(a,b,c)=>{"use strict";let d=c(7675),e=c(9294),f=c(3033),g=c(6906),h=c(1938),i=c(2831),j=c(787),k=c(1716),l=c(9290);c(3036);new WeakMap;(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})})},4870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5065:(a,b,c)=>{"use strict";let d,e,f,g,h,i;c.r(b),c.d(b,{handler:()=>dS,patchFetch:()=>dR,routeModule:()=>dN,serverHooks:()=>dQ,workAsyncStorage:()=>dO,workUnitAsyncStorage:()=>dP});var j={};c.r(j),c.d(j,{GET:()=>dL,POST:()=>dM});var k=c(5736),l=c(9117),m=c(4044),n=c(9326),o=c(2324),p=c(261),q=c(4290),r=c(5328),s=c(8928),t=c(6595),u=c(3421),v=c(7679),w=c(1681),x=c(3446),y=c(6439),z=c(1356),A=c(4230);c(4603),c(3535);var B=c(5174),C=c(2284);class D extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(a,b){super(a,b),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class E extends D{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class F extends D{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(a,b,c="unspecified",d="unspecified"){super(a,{cause:{claim:c,reason:d,payload:b}}),this.claim=c,this.reason=d,this.payload=b}}class G extends D{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class H extends D{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class I extends D{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor(a="decryption operation failed",b){super(a,b)}}class J extends D{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class K extends D{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class L extends D{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class M extends D{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class N extends D{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor(a="no applicable key found in the JSON Web Key Set",b){super(a,b)}}class O extends D{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor(a="multiple matching keys found in the JSON Web Key Set",b){super(a,b)}}class P extends D{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor(a="request timed out",b){super(a,b)}}class Q extends D{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(a="signature verification failed",b){super(a,b)}}let R=new TextEncoder,S=new TextDecoder;function T(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;for(let d of a)b.set(d,c),c+=d.length;return b}function U(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function V(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return U(c,b,0),U(c,a%0x100000000,4),c}function W(a){let b=new Uint8Array(4);return U(b,a),b}function X(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(a);let b=atob(a),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}function Y(a){if(Uint8Array.fromBase64)return Uint8Array.fromBase64("string"==typeof a?a:S.decode(a),{alphabet:"base64url"});let b=a;b instanceof Uint8Array&&(b=S.decode(b)),b=b.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return X(b)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function Z(a){let b=a;return("string"==typeof b&&(b=R.encode(b)),Uint8Array.prototype.toBase64)?b.toBase64({alphabet:"base64url",omitPadding:!0}):(function(a){if(Uint8Array.prototype.toBase64)return a.toBase64();let b=[];for(let c=0;c<a.length;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join(""))})(b).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}let $=(a,b)=>{if(a.byteLength!==b.length)return!1;for(let c=0;c<a.byteLength;c++)if(a[c]!==b[c])return!1;return!0},_=a=>{let b=a.data[a.pos++];if(128&b){let c=127&b,d=0;for(let b=0;b<c;b++)d=d<<8|a.data[a.pos++];return d}return b},aa=(a,b,c)=>{if(a.data[a.pos++]!==b)throw Error(c)},ab=(a,b)=>{let c=a.data.subarray(a.pos,a.pos+b);return a.pos+=b,c},ac=async(a,b,c,d)=>{let e,f,g="spki"===a,h=()=>g?["verify"]:["sign"];switch(c){case"PS256":case"PS384":case"PS512":e={name:"RSA-PSS",hash:`SHA-${c.slice(-3)}`},f=h();break;case"RS256":case"RS384":case"RS512":e={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${c.slice(-3)}`},f=h();break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":e={name:"RSA-OAEP",hash:`SHA-${parseInt(c.slice(-3),10)||1}`},f=g?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":case"ES384":case"ES512":e={name:"ECDSA",namedCurve:({ES256:"P-256",ES384:"P-384",ES512:"P-521"})[c]},f=h();break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":try{let a=d.getNamedCurve(b);e="X25519"===a?{name:"X25519"}:{name:"ECDH",namedCurve:a}}catch(a){throw new H("Invalid or unsupported key format")}f=g?[]:["deriveBits"];break;case"Ed25519":case"EdDSA":e={name:"Ed25519"},f=h();break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":e={name:c},f=h();break;default:throw new H('Invalid or unsupported "alg" (Algorithm) value')}return crypto.subtle.importKey(a,b,e,d?.extractable??!!g,f)},ad=async a=>{if(!a.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:b,keyUsages:c}=function(a){let b,c;switch(a.kty){case"AKP":switch(a.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":b={name:a.alg},c=a.priv?["sign"]:["verify"];break;default:throw new H('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"RSA":switch(a.alg){case"PS256":case"PS384":case"PS512":b={name:"RSA-PSS",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":b={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${a.alg.slice(-3)}`},c=a.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":b={name:"RSA-OAEP",hash:`SHA-${parseInt(a.alg.slice(-3),10)||1}`},c=a.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new H('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"EC":switch(a.alg){case"ES256":b={name:"ECDSA",namedCurve:"P-256"},c=a.d?["sign"]:["verify"];break;case"ES384":b={name:"ECDSA",namedCurve:"P-384"},c=a.d?["sign"]:["verify"];break;case"ES512":b={name:"ECDSA",namedCurve:"P-521"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:"ECDH",namedCurve:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new H('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;case"OKP":switch(a.alg){case"Ed25519":case"EdDSA":b={name:"Ed25519"},c=a.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":b={name:a.crv},c=a.d?["deriveBits"]:[];break;default:throw new H('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break;default:throw new H('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:b,keyUsages:c}}(a),d={...a};return"AKP"!==d.kty&&delete d.alg,delete d.use,crypto.subtle.importKey("jwk",d,b,a.ext??(!a.d&&!a.priv),a.key_ops??c)},ae=a=>{if(!function(a){return"object"==typeof a&&null!==a}(a)||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b};async function af(a,b,c){let d;if("string"!=typeof a||0!==a.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');let e=(d=/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,X(a.replace(d,""))),f=c;return b?.startsWith?.("ECDH-ES")&&((f||={}).getNamedCurve=a=>{let b={data:a,pos:0};return!function(a){aa(a,48,"Invalid PKCS#8 structure"),_(a),aa(a,2,"Expected version field");let b=_(a);a.pos+=b,aa(a,48,"Expected algorithm identifier"),_(a),a.pos}(b),(a=>{let b=(a=>{aa(a,6,"Expected algorithm OID");let b=_(a);return ab(a,b)})(a);if($(b,[43,101,110]))return"X25519";if(!$(b,[42,134,72,206,61,2,1]))throw Error("Unsupported key algorithm");aa(a,6,"Expected curve OID");let c=_(a),d=ab(a,c);for(let{name:a,oid:b}of[{name:"P-256",oid:[42,134,72,206,61,3,1,7]},{name:"P-384",oid:[43,129,4,0,34]},{name:"P-521",oid:[43,129,4,0,35]}])if($(d,b))return a;throw Error("Unsupported named curve")})(b)}),ac("pkcs8",e,b,f)}async function ag(a,b,c){let d;if(!ae(a))throw TypeError("JWK must be an object");switch(b??=a.alg,d??=c?.extractable??a.ext,a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');return Y(a.k);case"RSA":if("oth"in a&&void 0!==a.oth)throw new H('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return ad({...a,alg:b,ext:d});case"AKP":if("string"!=typeof a.alg||!a.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(void 0!==b&&b!==a.alg)throw TypeError("JWK alg and alg option value mismatch");return ad({...a,ext:d});case"EC":case"OKP":return ad({...a,alg:b,ext:d});default:throw new H('Unsupported "kty" (Key Type) Parameter value')}}function ah(a){return ae(a)}class ai{#a;#b=new WeakMap;constructor(a){if(!function(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(ah)}(a))throw new M("JSON Web Key Set malformed");this.#a=structuredClone(a)}jwks(){return this.#a}async getKey(a,b){let{alg:c,kid:d}={...a,...b?.header},e=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new H('Unsupported "alg" value for a JSON Web Key Set')}}(c),f=this.#a.keys.filter(a=>{let b=e===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&("string"==typeof a.alg||"AKP"===e)&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv;break;case"Ed25519":case"EdDSA":b="Ed25519"===a.crv}return b}),{0:g,length:h}=f;if(0===h)throw new N;if(1!==h){let a=new O,b=this.#b;throw a[Symbol.asyncIterator]=async function*(){for(let a of f)try{yield await aj(b,a,c)}catch{}},a}return aj(this.#b,g,c)}}async function aj(a,b,c){let d=a.get(b)||a.set(b,{}).get(b);if(void 0===d[c]){let a=await ag({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new M("JSON Web Key Set members must be public keys");d[c]=a}return d[c]}function ak(a){let b=new ai(a),c=async(a,c)=>b.getKey(a,c);return Object.defineProperties(c,{jwks:{value:()=>structuredClone(b.jwks()),enumerable:!1,configurable:!1,writable:!1}}),c}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(d="jose/v6.1.0");let al=Symbol();async function am(a,b,c,d=fetch){let e=await d(a,{method:"GET",signal:c,redirect:"manual",headers:b}).catch(a=>{if("TimeoutError"===a.name)throw new P;throw a});if(200!==e.status)throw new D("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await e.json()}catch{throw new D("Failed to parse the JSON Web Key Set HTTP response as JSON")}}let an=Symbol();class ao{#c;#d;#e;#f;#g;#h;#i;#j;#k;#l;constructor(a,b){if(!(a instanceof URL))throw TypeError("url must be an instance of URL");this.#c=new URL(a.href),this.#d="number"==typeof b?.timeoutDuration?b?.timeoutDuration:5e3,this.#e="number"==typeof b?.cooldownDuration?b?.cooldownDuration:3e4,this.#f="number"==typeof b?.cacheMaxAge?b?.cacheMaxAge:6e5,this.#i=new Headers(b?.headers),d&&!this.#i.has("User-Agent")&&this.#i.set("User-Agent",d),this.#i.has("accept")||(this.#i.set("accept","application/json"),this.#i.append("accept","application/jwk-set+json")),this.#j=b?.[al],b?.[an]!==void 0&&(this.#l=b?.[an],function(a,b){return!("object"!=typeof a||null===a||!("uat"in a)||"number"!=typeof a.uat||Date.now()-a.uat>=b)&&"jwks"in a&&!!ae(a.jwks)&&!!Array.isArray(a.jwks.keys)&&!!Array.prototype.every.call(a.jwks.keys,ae)}(b?.[an],this.#f)&&(this.#g=this.#l.uat,this.#k=ak(this.#l.jwks)))}pendingFetch(){return!!this.#h}coolingDown(){return"number"==typeof this.#g&&Date.now()<this.#g+this.#e}fresh(){return"number"==typeof this.#g&&Date.now()<this.#g+this.#f}jwks(){return this.#k?.jwks()}async getKey(a,b){this.#k&&this.fresh()||await this.reload();try{return await this.#k(a,b)}catch(c){if(c instanceof N&&!1===this.coolingDown())return await this.reload(),this.#k(a,b);throw c}}async reload(){this.#h&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this.#h=void 0),this.#h||=am(this.#c.href,this.#i,AbortSignal.timeout(this.#d),this.#j).then(a=>{this.#k=ak(a),this.#l&&(this.#l.uat=Date.now(),this.#l.jwks=a),this.#g=Date.now(),this.#h=void 0}).catch(a=>{throw this.#h=void 0,a}),await this.#h}}let ap=(a,b)=>{if(a.startsWith("RS")||a.startsWith("PS")){let{modulusLength:c}=b.algorithm;if("number"!=typeof c||c<2048)throw TypeError(`${a} requires key modulusLength to be 2048 bits or larger`)}};function aq(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function ar(a,b){return a.name===b}function as(a){return parseInt(a.name.slice(4),10)}function at(a,b){if(b&&!a.usages.includes(b))throw TypeError(`CryptoKey does not support this operation, its usages must include ${b}.`)}function au(a,b,c){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if(!ar(a.algorithm,"AES-GCM"))throw aq("AES-GCM");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw aq(c,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!ar(a.algorithm,"AES-KW"))throw aq("AES-KW");let c=parseInt(b.slice(1,4),10);if(a.algorithm.length!==c)throw aq(c,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":break;default:throw aq("ECDH or X25519")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!ar(a.algorithm,"PBKDF2"))throw aq("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!ar(a.algorithm,"RSA-OAEP"))throw aq("RSA-OAEP");let c=parseInt(b.slice(9),10)||1;if(as(a.algorithm.hash)!==c)throw aq(`SHA-${c}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}at(a,c)}function av(a,b,...c){if((c=c.filter(Boolean)).length>2){let b=c.pop();a+=`one of type ${c.join(", ")}, or ${b}.`}else 2===c.length?a+=`one of type ${c[0]} or ${c[1]}.`:a+=`of type ${c[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor?.name&&(a+=` Received an instance of ${b.constructor.name}`),a}let aw=(a,...b)=>av("Key must be ",a,...b);function ax(a,b,...c){return av(`Key for the ${a} algorithm must be `,b,...c)}let ay=async(a,b,c)=>{if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError(aw(b,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",b,{hash:`SHA-${a.slice(-3)}`,name:"HMAC"},!1,[c])}return!function(a,b,c){switch(b){case"HS256":case"HS384":case"HS512":{if(!ar(a.algorithm,"HMAC"))throw aq("HMAC");let c=parseInt(b.slice(2),10);if(as(a.algorithm.hash)!==c)throw aq(`SHA-${c}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!ar(a.algorithm,"RSASSA-PKCS1-v1_5"))throw aq("RSASSA-PKCS1-v1_5");let c=parseInt(b.slice(2),10);if(as(a.algorithm.hash)!==c)throw aq(`SHA-${c}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!ar(a.algorithm,"RSA-PSS"))throw aq("RSA-PSS");let c=parseInt(b.slice(2),10);if(as(a.algorithm.hash)!==c)throw aq(`SHA-${c}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":if(!ar(a.algorithm,"Ed25519"))throw aq("Ed25519");break;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":if(!ar(a.algorithm,b))throw aq(b);break;case"ES256":case"ES384":case"ES512":{if(!ar(a.algorithm,"ECDSA"))throw aq("ECDSA");let c=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==c)throw aq(c,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}at(a,c)}(b,a,c),b},az=async(a,b,c,d)=>{let e=await ay(a,b,"verify");ap(a,e);let f=((a,b)=>{let c=`SHA-${a.slice(-3)}`;switch(a){case"HS256":case"HS384":case"HS512":return{hash:c,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:c,name:"RSA-PSS",saltLength:parseInt(a.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:c,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:c,name:"ECDSA",namedCurve:b.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:a};default:throw new H(`alg ${a} is not supported either by JOSE or your javascript runtime`)}})(a,e.algorithm);try{return await crypto.subtle.verify(f,e,c,d)}catch{return!1}},aA=(...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0};function aB(a){if(!aC(a))throw Error("CryptoKey instance expected")}function aC(a){return a?.[Symbol.toStringTag]==="CryptoKey"}function aD(a){return a?.[Symbol.toStringTag]==="KeyObject"}let aE=a=>aC(a)||aD(a);function aF(a){return ae(a)&&"string"==typeof a.kty}let aG=a=>a?.[Symbol.toStringTag],aH=(a,b,c)=>{if(void 0!==b.use){let a;switch(c){case"sign":case"verify":a="sig";break;case"encrypt":case"decrypt":a="enc"}if(b.use!==a)throw TypeError(`Invalid key for this operation, its "use" must be "${a}" when present`)}if(void 0!==b.alg&&b.alg!==a)throw TypeError(`Invalid key for this operation, its "alg" must be "${a}" when present`);if(Array.isArray(b.key_ops)){let d;switch(!0){case"sign"===c||"verify"===c:case"dir"===a:case a.includes("CBC-HS"):d=c;break;case a.startsWith("PBES2"):d="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test(a):d=!a.includes("GCM")&&a.endsWith("KW")?"encrypt"===c?"wrapKey":"unwrapKey":c;break;case"encrypt"===c&&a.startsWith("RSA"):d="wrapKey";break;case"decrypt"===c:d=a.startsWith("RSA")?"unwrapKey":"deriveBits"}if(d&&b.key_ops?.includes?.(d)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${d}" when present`)}return!0},aI=(a,b,c)=>{a.startsWith("HS")||"dir"===a||a.startsWith("PBES2")||/^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(a)||/^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(a)?((a,b,c)=>{if(!(b instanceof Uint8Array)){if(aF(b)){if(function(a){return"oct"===a.kty&&"string"==typeof a.k}(b)&&aH(a,b,c))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!aE(b))throw TypeError(ax(a,b,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if("secret"!==b.type)throw TypeError(`${aG(b)} instances for symmetric algorithms must be of type "secret"`)}})(a,b,c):((a,b,c)=>{if(aF(b))switch(c){case"decrypt":case"sign":if(function(a){return"oct"!==a.kty&&("AKP"===a.kty&&"string"==typeof a.priv||"string"==typeof a.d)}(b)&&aH(a,b,c))return;throw TypeError("JSON Web Key for this operation be a private JWK");case"encrypt":case"verify":if(function(a){return"oct"!==a.kty&&void 0===a.d&&void 0===a.priv}(b)&&aH(a,b,c))return;throw TypeError("JSON Web Key for this operation be a public JWK")}if(!aE(b))throw TypeError(ax(a,b,"CryptoKey","KeyObject","JSON Web Key"));if("secret"===b.type)throw TypeError(`${aG(b)} instances for asymmetric algorithms must not be of type "secret"`);if("public"===b.type)switch(c){case"sign":throw TypeError(`${aG(b)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${aG(b)} instances for asymmetric algorithm decryption must be of type "private"`)}if("private"===b.type)switch(c){case"verify":throw TypeError(`${aG(b)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${aG(b)} instances for asymmetric algorithm encryption must be of type "public"`)}})(a,b,c)},aJ=(a,b,c,d,e)=>{let f;if(void 0!==e.crit&&d?.crit===void 0)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!d||void 0===d.crit)return new Set;if(!Array.isArray(d.crit)||0===d.crit.length||d.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let g of(f=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,d.crit)){if(!f.has(g))throw new H(`Extension Header Parameter "${g}" is not recognized`);if(void 0===e[g])throw new a(`Extension Header Parameter "${g}" is missing`);if(f.get(g)&&void 0===d[g])throw new a(`Extension Header Parameter "${g}" MUST be integrity protected`)}return new Set(d.crit)},aK=(a,b)=>{if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)},aL=async(a,b,c,d=!1)=>{let f=(e||=new WeakMap).get(a);if(f?.[c])return f[c];let g=await ad({...b,alg:c});return d&&Object.freeze(a),f?f[c]=g:e.set(a,{[c]:g}),g},aM=async(a,b)=>{if(a instanceof Uint8Array||aC(a))return a;if(aD(a)){if("secret"===a.type)return a.export();if("toCryptoKey"in a&&"function"==typeof a.toCryptoKey)try{return((a,b)=>{let c,d=(e||=new WeakMap).get(a);if(d?.[b])return d[b];let f="public"===a.type,g=!!f;if("x25519"===a.asymmetricKeyType){switch(b){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}c=a.toCryptoKey(a.asymmetricKeyType,g,f?[]:["deriveBits"])}if("ed25519"===a.asymmetricKeyType){if("EdDSA"!==b&&"Ed25519"!==b)throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}switch(a.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":if(b!==a.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");c=a.toCryptoKey(a.asymmetricKeyType,g,[f?"verify":"sign"])}if("rsa"===a.asymmetricKeyType){let d;switch(b){case"RSA-OAEP":d="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":d="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":d="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":d="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(b.startsWith("RSA-OAEP"))return a.toCryptoKey({name:"RSA-OAEP",hash:d},g,f?["encrypt"]:["decrypt"]);c=a.toCryptoKey({name:b.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:d},g,[f?"verify":"sign"])}if("ec"===a.asymmetricKeyType){let d=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get(a.asymmetricKeyDetails?.namedCurve);if(!d)throw TypeError("given KeyObject instance cannot be used for this algorithm");"ES256"===b&&"P-256"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES384"===b&&"P-384"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),"ES512"===b&&"P-521"===d&&(c=a.toCryptoKey({name:"ECDSA",namedCurve:d},g,[f?"verify":"sign"])),b.startsWith("ECDH-ES")&&(c=a.toCryptoKey({name:"ECDH",namedCurve:d},g,f?[]:["deriveBits"]))}if(!c)throw TypeError("given KeyObject instance cannot be used for this algorithm");return d?d[b]=c:e.set(a,{[b]:c}),c})(a,b)}catch(a){if(a instanceof TypeError)throw a}let c=a.export({format:"jwk"});return aL(a,c,b)}if(aF(a))return a.k?Y(a.k):aL(a,a,b,!0);throw Error("unreachable")};async function aN(a,b,c){let d,e;if(!ae(a))throw new K("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new K('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new K("JWS Protected Header incorrect type");if(void 0===a.payload)throw new K("JWS Payload missing");if("string"!=typeof a.signature)throw new K("JWS Signature missing or incorrect type");if(void 0!==a.header&&!ae(a.header))throw new K("JWS Unprotected Header incorrect type");let f={};if(a.protected)try{let b=Y(a.protected);f=JSON.parse(S.decode(b))}catch{throw new K("JWS Protected Header is invalid")}if(!aA(f,a.header))throw new K("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let g={...f,...a.header},h=aJ(K,new Map([["b64",!0]]),c?.crit,f,g),i=!0;if(h.has("b64")&&"boolean"!=typeof(i=f.b64))throw new K('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:j}=g;if("string"!=typeof j||!j)throw new K('JWS "alg" (Algorithm) Header Parameter missing or invalid');let k=c&&aK("algorithms",c.algorithms);if(k&&!k.has(j))throw new G('"alg" (Algorithm) Header Parameter value not allowed');if(i){if("string"!=typeof a.payload)throw new K("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new K("JWS Payload must be a string or an Uint8Array instance");let l=!1;"function"==typeof b&&(b=await b(f,a),l=!0),aI(j,b,"verify");let m=T(R.encode(a.protected??""),R.encode("."),"string"==typeof a.payload?R.encode(a.payload):a.payload);try{d=Y(a.signature)}catch{throw new K("Failed to base64url decode the signature")}let n=await aM(b,j);if(!await az(j,n,d,m))throw new Q;if(i)try{e=Y(a.payload)}catch{throw new K("Failed to base64url decode the payload")}else e="string"==typeof a.payload?R.encode(a.payload):a.payload;let o={payload:e};return(void 0!==a.protected&&(o.protectedHeader=f),void 0!==a.header&&(o.unprotectedHeader=a.header),l)?{...o,key:n}:o}async function aO(a,b,c){if(a instanceof Uint8Array&&(a=S.decode(a)),"string"!=typeof a)throw new K("Compact JWS must be a string or Uint8Array");let{0:d,1:e,2:f,length:g}=a.split(".");if(3!==g)throw new K("Invalid Compact JWS");let h=await aN({payload:e,protected:d,signature:f},b,c),i={payload:h.payload,protectedHeader:h.protectedHeader};return"function"==typeof b?{...i,key:h.key}:i}let aP=a=>Math.floor(a.getTime()/1e3),aQ=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,aR=a=>{let b,c=aQ.exec(a);if(!c||c[4]&&c[1])throw TypeError("Invalid time period format");let d=parseFloat(c[2]);switch(c[3].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":b=Math.round(d);break;case"minute":case"minutes":case"min":case"mins":case"m":b=Math.round(60*d);break;case"hour":case"hours":case"hr":case"hrs":case"h":b=Math.round(3600*d);break;case"day":case"days":case"d":b=Math.round(86400*d);break;case"week":case"weeks":case"w":b=Math.round(604800*d);break;default:b=Math.round(0x1e187e0*d)}return"-"===c[1]||"ago"===c[4]?-b:b};function aS(a,b){if(!Number.isFinite(b))throw TypeError(`Invalid ${a} input`);return b}let aT=a=>a.includes("/")?a.toLowerCase():`application/${a.toLowerCase()}`;function aU(a,b,c={}){var d,e;let f,g;try{f=JSON.parse(S.decode(b))}catch{}if(!ae(f))throw new L("JWT Claims Set must be a top-level JSON object");let{typ:h}=c;if(h&&("string"!=typeof a.typ||aT(a.typ)!==aT(h)))throw new E('unexpected "typ" JWT header value',f,"typ","check_failed");let{requiredClaims:i=[],issuer:j,subject:k,audience:l,maxTokenAge:m}=c,n=[...i];for(let a of(void 0!==m&&n.push("iat"),void 0!==l&&n.push("aud"),void 0!==k&&n.push("sub"),void 0!==j&&n.push("iss"),new Set(n.reverse())))if(!(a in f))throw new E(`missing required "${a}" claim`,f,a,"missing");if(j&&!(Array.isArray(j)?j:[j]).includes(f.iss))throw new E('unexpected "iss" claim value',f,"iss","check_failed");if(k&&f.sub!==k)throw new E('unexpected "sub" claim value',f,"sub","check_failed");if(l&&(d=f.aud,e="string"==typeof l?[l]:l,"string"==typeof d?!e.includes(d):!(Array.isArray(d)&&e.some(Set.prototype.has.bind(new Set(d))))))throw new E('unexpected "aud" claim value',f,"aud","check_failed");switch(typeof c.clockTolerance){case"string":g=aR(c.clockTolerance);break;case"number":g=c.clockTolerance;break;case"undefined":g=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:o}=c,p=aP(o||new Date);if((void 0!==f.iat||m)&&"number"!=typeof f.iat)throw new E('"iat" claim must be a number',f,"iat","invalid");if(void 0!==f.nbf){if("number"!=typeof f.nbf)throw new E('"nbf" claim must be a number',f,"nbf","invalid");if(f.nbf>p+g)throw new E('"nbf" claim timestamp check failed',f,"nbf","check_failed")}if(void 0!==f.exp){if("number"!=typeof f.exp)throw new E('"exp" claim must be a number',f,"exp","invalid");if(f.exp<=p-g)throw new F('"exp" claim timestamp check failed',f,"exp","check_failed")}if(m){let a=p-f.iat;if(a-g>("number"==typeof m?m:aR(m)))throw new F('"iat" claim timestamp check failed (too far in the past)',f,"iat","check_failed");if(a<0-g)throw new E('"iat" claim timestamp check failed (it should be in the past)',f,"iat","check_failed")}return f}class aV{#m;constructor(a){if(!ae(a))throw TypeError("JWT Claims Set MUST be an object");this.#m=structuredClone(a)}data(){return R.encode(JSON.stringify(this.#m))}get iss(){return this.#m.iss}set iss(a){this.#m.iss=a}get sub(){return this.#m.sub}set sub(a){this.#m.sub=a}get aud(){return this.#m.aud}set aud(a){this.#m.aud=a}set jti(a){this.#m.jti=a}set nbf(a){"number"==typeof a?this.#m.nbf=aS("setNotBefore",a):a instanceof Date?this.#m.nbf=aS("setNotBefore",aP(a)):this.#m.nbf=aP(new Date)+aR(a)}set exp(a){"number"==typeof a?this.#m.exp=aS("setExpirationTime",a):a instanceof Date?this.#m.exp=aS("setExpirationTime",aP(a)):this.#m.exp=aP(new Date)+aR(a)}set iat(a){void 0===a?this.#m.iat=aP(new Date):a instanceof Date?this.#m.iat=aS("setIssuedAt",aP(a)):"string"==typeof a?this.#m.iat=aS("setIssuedAt",aP(new Date)+aR(a)):this.#m.iat=aS("setIssuedAt",a)}}async function aW(a,b,c){let d=await aO(a,b,c);if(d.protectedHeader.crit?.includes("b64")&&!1===d.protectedHeader.b64)throw new L("JWTs MUST NOT use unencoded payload");let e={payload:aU(d.protectedHeader,d.payload,c),protectedHeader:d.protectedHeader};return"function"==typeof b?{...e,key:d.key}:e}function aX(a,b){if(null==a)return!1;try{return a instanceof b||Object.getPrototypeOf(a)[Symbol.toStringTag]===b.prototype[Symbol.toStringTag]}catch{return!1}}"undefined"!=typeof navigator&&navigator.userAgent?.startsWith?.("Mozilla/5.0 ")||(f="oauth4webapi/v3.8.1");let aY="ERR_INVALID_ARG_VALUE",aZ="ERR_INVALID_ARG_TYPE";function a$(a,b,c){let d=TypeError(a,{cause:c});return Object.assign(d,{code:b}),d}let a_=Symbol(),a0=Symbol(),a1=Symbol(),a2=Symbol(),a3=(Symbol(),Symbol());Symbol();let a4=new TextEncoder,a5=new TextDecoder;function a6(a){return"string"==typeof a?a4.encode(a):a5.decode(a)}function a7(a){return"string"==typeof a?h(a):g(a)}g=Uint8Array.prototype.toBase64?a=>(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),a.toBase64({alphabet:"base64url",omitPadding:!0})):a=>{a instanceof ArrayBuffer&&(a=new Uint8Array(a));let b=[];for(let c=0;c<a.byteLength;c+=32768)b.push(String.fromCharCode.apply(null,a.subarray(c,c+32768)));return btoa(b.join("")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},h=Uint8Array.fromBase64?a=>{try{return Uint8Array.fromBase64(a,{alphabet:"base64url"})}catch(a){throw a$("The input to be decoded is not correctly encoded.",aY,a)}}:a=>{try{let b=atob(a.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"")),c=new Uint8Array(b.length);for(let a=0;a<b.length;a++)c[a]=b.charCodeAt(a);return c}catch(a){throw a$("The input to be decoded is not correctly encoded.",aY,a)}};class a8 extends Error{code;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=b4,Error.captureStackTrace?.(this,this.constructor)}}class a9 extends Error{code;constructor(a,b){super(a,b),this.name=this.constructor.name,b?.code&&(this.code=b?.code),Error.captureStackTrace?.(this,this.constructor)}}function ba(a,b,c){return new a9(a,{code:b,cause:c})}function bb(a){return!(null===a||"object"!=typeof a||Array.isArray(a))}function bc(a){aX(a,Headers)&&(a=Object.fromEntries(a.entries()));let b=new Headers(a??{});if(f&&!b.has("user-agent")&&b.set("user-agent",f),b.has("authorization"))throw a$('"options.headers" must not include the "authorization" header name',aY);return b}function bd(a,b){if(void 0!==b){if("function"==typeof b&&(b=b(a.href)),!(b instanceof AbortSignal))throw a$('"options.signal" must return or be an instance of AbortSignal',aZ);return b}}function be(a){return a.includes("//")?a.replace("//","/"):a}async function bf(a,b,c,d){if(!(a instanceof URL))throw a$(`"${b}" must be an instance of URL`,aZ);bu(a,d?.[a_]!==!0);let e=c(new URL(a.href)),f=bc(d?.headers);return f.set("accept","application/json"),(d?.[a2]||fetch)(e.href,{body:void 0,headers:Object.fromEntries(f.entries()),method:"GET",redirect:"manual",signal:bd(e,d?.signal)})}async function bg(a,b){return bf(a,"issuerIdentifier",a=>{switch(b?.algorithm){case void 0:case"oidc":a.pathname=be(`${a.pathname}/.well-known/openid-configuration`);break;case"oauth2":!function(a,b,c=!1){"/"===a.pathname?a.pathname=b:a.pathname=be(`${b}/${c?a.pathname:a.pathname.replace(/(\/)$/,"")}`)}(a,".well-known/oauth-authorization-server");break;default:throw a$('"options.algorithm" must be "oidc" (default), or "oauth2"',aY)}return a},b)}function bh(a,b,c,d,e){try{if("number"!=typeof a||!Number.isFinite(a))throw a$(`${c} must be a number`,aZ,e);if(a>0)return;if(b){if(0!==a)throw a$(`${c} must be a non-negative number`,aY,e);return}throw a$(`${c} must be a positive number`,aY,e)}catch(a){if(d)throw ba(a.message,d,e);throw a}}function bi(a,b,c,d){try{if("string"!=typeof a)throw a$(`${b} must be a string`,aZ,d);if(0===a.length)throw a$(`${b} must not be empty`,aY,d)}catch(a){if(c)throw ba(a.message,c,d);throw a}}async function bj(a,b){if(!(a instanceof URL)&&a!==cr)throw a$('"expectedIssuerIdentifier" must be an instance of URL',aZ);if(!aX(b,Response))throw a$('"response" must be an instance of Response',aZ);if(200!==b.status)throw ba('"response" is not a conform Authorization Server Metadata response (unexpected HTTP status code)',b9,b);cj(b);let c=await cq(b);if(bi(c.issuer,'"response" body "issuer" property',b7,{body:c}),a!==cr&&new URL(c.issuer).href!==a.href)throw ba('"response" body "issuer" property does not match the expected value',ce,{expected:a.href,body:c,attribute:"issuer"});return c}function bk(a){var b,c=a,d="application/json";if(b=c,b.headers.get("content-type")?.split(";")[0]!==d)throw function(a,...b){let c='"response" content-type must be ';if(b.length>2){let a=b.pop();c+=`${b.join(", ")}, or ${a}`}else 2===b.length?c+=`${b[0]} or ${b[1]}`:c+=b[0];return ba(c,b8,a)}(c,d)}function bl(){return a7(crypto.getRandomValues(new Uint8Array(32)))}async function bm(a){return bi(a,"codeVerifier"),a7(await crypto.subtle.digest("SHA-256",a6(a)))}function bn(a){let b=a?.[a0];return"number"==typeof b&&Number.isFinite(b)?b:0}function bo(a){let b=a?.[a1];return"number"==typeof b&&Number.isFinite(b)&&-1!==Math.sign(b)?b:30}function bp(){return Math.floor(Date.now()/1e3)}function bq(a){if("object"!=typeof a||null===a)throw a$('"as" must be an object',aZ);bi(a.issuer,'"as.issuer"')}function br(a){if("object"!=typeof a||null===a)throw a$('"client" must be an object',aZ);bi(a.client_id,'"client.client_id"')}async function bs(a,b,c){if(!c.usages.includes("sign"))throw a$('CryptoKey instances used for signing assertions must include "sign" in their "usages"',aY);let d=`${a7(a6(JSON.stringify(a)))}.${a7(a6(JSON.stringify(b)))}`,e=a7(await crypto.subtle.sign(function(a){switch(a.algorithm.name){case"ECDSA":return{name:a.algorithm.name,hash:function(a){let{algorithm:b}=a;switch(b.namedCurve){case"P-256":return"SHA-256";case"P-384":return"SHA-384";case"P-521":return"SHA-512";default:throw new a8("unsupported ECDSA namedCurve",{cause:a})}}(a)};case"RSA-PSS":switch(ck(a),a.algorithm.hash.name){case"SHA-256":case"SHA-384":case"SHA-512":return{name:a.algorithm.name,saltLength:parseInt(a.algorithm.hash.name.slice(-3),10)>>3};default:throw new a8("unsupported RSA-PSS hash name",{cause:a})}case"RSASSA-PKCS1-v1_5":return ck(a),a.algorithm.name;case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":case"Ed25519":return a.algorithm.name}throw new a8("unsupported CryptoKey algorithm name",{cause:a})}(c),c,a6(d)));return`${d}.${e}`}let bt=URL.parse?(a,b)=>URL.parse(a,b):(a,b)=>{try{return new URL(a,b)}catch{return null}};function bu(a,b){if(b&&"https:"!==a.protocol)throw ba("only requests to HTTPS are allowed",ca,a);if("https:"!==a.protocol&&"http:"!==a.protocol)throw ba("only HTTP and HTTPS requests are allowed",cb,a)}function bv(a,b,c,d){let e;if("string"!=typeof a||!(e=bt(a)))throw ba(`authorization server metadata does not contain a valid ${c?`"as.mtls_endpoint_aliases.${b}"`:`"as.${b}"`}`,void 0===a?cf:cg,{attribute:c?`mtls_endpoint_aliases.${b}`:b});return bu(e,d),e}function bw(a,b,c,d){return c&&a.mtls_endpoint_aliases&&b in a.mtls_endpoint_aliases?bv(a.mtls_endpoint_aliases[b],b,c,d):bv(a[b],b,c,d)}async function bx(a,b,c,d,e){bq(a),br(b);let f=bw(a,"pushed_authorization_request_endpoint",b.use_mtls_endpoint_aliases,e?.[a_]!==!0),g=new URLSearchParams(d);g.set("client_id",b.client_id);let h=bc(e?.headers);h.set("accept","application/json"),e?.DPoP!==void 0&&(bJ(e.DPoP),await e.DPoP.addProof(f,h,"POST"));let i=await bK(a,b,c,f,g,h,e);return e?.DPoP?.cacheNonce(i),i}class by extends Error{cause;code;error;status;error_description;response;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=b3,this.cause=b.cause,this.error=b.cause.error,this.status=b.response.status,this.error_description=b.cause.error_description,Object.defineProperty(this,"response",{enumerable:!1,value:b.response}),Error.captureStackTrace?.(this,this.constructor)}}class bz extends Error{cause;code;error;error_description;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=b5,this.cause=b.cause,this.error=b.cause.get("error"),this.error_description=b.cause.get("error_description")??void 0,Error.captureStackTrace?.(this,this.constructor)}}class bA extends Error{cause;code;response;status;constructor(a,b){super(a,b),this.name=this.constructor.name,this.code=b2,this.cause=b.cause,this.status=b.response.status,this.response=b.response,Object.defineProperty(this,"response",{enumerable:!1}),Error.captureStackTrace?.(this,this.constructor)}}let bB="[a-zA-Z0-9!#$%&\\'\\*\\+\\-\\.\\^_`\\|~]+",bC=RegExp("^[,\\s]*("+bB+")\\s(.*)"),bD=RegExp("^[,\\s]*("+bB+')\\s*=\\s*"((?:[^"\\\\]|\\\\.)*)"[,\\s]*(.*)'),bE=RegExp("^[,\\s]*"+("("+bB+")\\s*=\\s*(")+bB+")[,\\s]*(.*)"),bF=RegExp("^([a-zA-Z0-9\\-\\._\\~\\+\\/]+[=]{0,2})(?:$|[,\\s])(.*)");async function bG(a,b,c){if(bq(a),br(b),!aX(c,Response))throw a$('"response" must be an instance of Response',aZ);await bI(c,201,"Pushed Authorization Request Endpoint"),cj(c);let d=await cq(c);bi(d.request_uri,'"response" body "request_uri" property',b7,{body:d});let e="number"!=typeof d.expires_in?parseFloat(d.expires_in):d.expires_in;return bh(e,!0,'"response" body "expires_in" property',b7,{body:d}),d.expires_in=e,d}async function bH(a){if(a.status>399&&a.status<500){cj(a),bk(a);try{let b=await a.clone().json();if(bb(b)&&"string"==typeof b.error&&b.error.length)return b}catch{}}}async function bI(a,b,c){if(a.status!==b){let b;if(function(a){let b;if(b=function(a){if(!aX(a,Response))throw a$('"response" must be an instance of Response',aZ);let b=a.headers.get("www-authenticate");if(null===b)return;let c=[],d=b;for(;d;){let a,b=d.match(bC),e=b?.["1"].toLowerCase();if(d=b?.["2"],!e)return;let f={};for(;d;){let c,e;if(b=d.match(bD)){if([,c,e,d]=b,e.includes("\\"))try{e=JSON.parse(`"${e}"`)}catch{}f[c.toLowerCase()]=e;continue}if(b=d.match(bE)){[,c,e,d]=b,f[c.toLowerCase()]=e;continue}if(b=d.match(bF)){if(Object.keys(f).length)break;[,a,d]=b;break}return}let g={scheme:e,parameters:f};a&&(g.token68=a),c.push(g)}if(c.length)return c}(a))throw new bA("server responded with a challenge in the WWW-Authenticate HTTP Header",{cause:b,response:a})}(a),b=await bH(a))throw await a.body?.cancel(),new by("server responded with an error in the response body",{cause:b,response:a});throw ba(`"response" is not a conform ${c} response (unexpected HTTP status code)`,b9,a)}}function bJ(a){if(!bU.has(a))throw a$('"options.DPoP" is not a valid DPoPHandle',aY)}async function bK(a,b,c,d,e,f,g){return await c(a,b,e,f),f.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),(g?.[a2]||fetch)(d.href,{body:e,headers:Object.fromEntries(f.entries()),method:"POST",redirect:"manual",signal:bd(d,g?.signal)})}async function bL(a,b,c,d,e,f){let g=bw(a,"token_endpoint",b.use_mtls_endpoint_aliases,f?.[a_]!==!0);e.set("grant_type",d);let h=bc(f?.headers);h.set("accept","application/json"),f?.DPoP!==void 0&&(bJ(f.DPoP),await f.DPoP.addProof(g,h,"POST"));let i=await bK(a,b,c,g,e,h,f);return f?.DPoP?.cacheNonce(i),i}async function bM(a,b,c,d,e){bq(a),br(b),bi(d,'"refreshToken"');let f=new URLSearchParams(e?.additionalParameters);return f.set("refresh_token",d),bL(a,b,c,"refresh_token",f,e)}Symbol();let bN=new WeakMap,bO=new WeakMap;function bP(a){if(!a.id_token)return;let b=bN.get(a);if(!b)throw a$('"ref" was already garbage collected or did not resolve from the proper sources',aY);return b}async function bQ(a,b,c,d,e,f){if(bq(a),br(b),!aX(c,Response))throw a$('"response" must be an instance of Response',aZ);await bI(c,200,"Token Endpoint"),cj(c);let g=await cq(c);if(bi(g.access_token,'"response" body "access_token" property',b7,{body:g}),bi(g.token_type,'"response" body "token_type" property',b7,{body:g}),g.token_type=g.token_type.toLowerCase(),void 0!==g.expires_in){let a="number"!=typeof g.expires_in?parseFloat(g.expires_in):g.expires_in;bh(a,!0,'"response" body "expires_in" property',b7,{body:g}),g.expires_in=a}if(void 0!==g.refresh_token&&bi(g.refresh_token,'"response" body "refresh_token" property',b7,{body:g}),void 0!==g.scope&&"string"!=typeof g.scope)throw ba('"response" body "scope" property must be a string',b7,{body:g});if(void 0!==g.id_token){bi(g.id_token,'"response" body "id_token" property',b7,{body:g});let f=["aud","exp","iat","iss","sub"];!0===b.require_auth_time&&f.push("auth_time"),void 0!==b.default_max_age&&(bh(b.default_max_age,!0,'"client.default_max_age"'),f.push("auth_time")),d?.length&&f.push(...d);let{claims:h,jwt:i}=await cl(g.id_token,cm.bind(void 0,b.id_token_signed_response_alg,a.id_token_signing_alg_values_supported,"RS256"),bn(b),bo(b),e).then(bY.bind(void 0,f)).then(bT.bind(void 0,a)).then(bS.bind(void 0,b.client_id));if(Array.isArray(h.aud)&&1!==h.aud.length){if(void 0===h.azp)throw ba('ID Token "aud" (audience) claim includes additional untrusted audiences',cd,{claims:h,claim:"aud"});if(h.azp!==b.client_id)throw ba('unexpected ID Token "azp" (authorized party) claim value',cd,{expected:b.client_id,claims:h,claim:"azp"})}void 0!==h.auth_time&&bh(h.auth_time,!0,'ID Token "auth_time" (authentication time)',b7,{claims:h}),bO.set(c,i),bN.set(g,h)}if(f?.[g.token_type]!==void 0)f[g.token_type](c,g);else if("dpop"!==g.token_type&&"bearer"!==g.token_type)throw new a8("unsupported `token_type` value",{cause:{body:g}});return g}async function bR(a,b,c,d){return bQ(a,b,c,void 0,d?.[a3],d?.recognizedTokenTypes)}function bS(a,b){if(Array.isArray(b.claims.aud)){if(!b.claims.aud.includes(a))throw ba('unexpected JWT "aud" (audience) claim value',cd,{expected:a,claims:b.claims,claim:"aud"})}else if(b.claims.aud!==a)throw ba('unexpected JWT "aud" (audience) claim value',cd,{expected:a,claims:b.claims,claim:"aud"});return b}function bT(a,b){let c=a[cs]?.(b)??a.issuer;if(b.claims.iss!==c)throw ba('unexpected JWT "iss" (issuer) claim value',cd,{expected:c,claims:b.claims,claim:"iss"});return b}let bU=new WeakSet,bV=Symbol();async function bW(a,b,c,d,e,f,g){if(bq(a),br(b),!bU.has(d))throw a$('"callbackParameters" must be an instance of URLSearchParams obtained from "validateAuthResponse()", or "validateJwtAuthResponse()',aY);bi(e,'"redirectUri"');let h=cn(d,"code");if(!h)throw ba('no authorization code in "callbackParameters"',b7);let i=new URLSearchParams(g?.additionalParameters);return i.set("redirect_uri",e),i.set("code",h),f!==bV&&(bi(f,'"codeVerifier"'),i.set("code_verifier",f)),bL(a,b,c,"authorization_code",i,g)}let bX={aud:"audience",c_hash:"code hash",client_id:"client id",exp:"expiration time",iat:"issued at",iss:"issuer",jti:"jwt id",nonce:"nonce",s_hash:"state hash",sub:"subject",ath:"access token hash",htm:"http method",htu:"http uri",cnf:"confirmation",auth_time:"authentication time"};function bY(a,b){for(let c of a)if(void 0===b.claims[c])throw ba(`JWT "${c}" (${bX[c]}) claim missing`,b7,{claims:b.claims});return b}let bZ=Symbol(),b$=Symbol();async function b_(a,b,c,d){return"string"==typeof d?.expectedNonce||"number"==typeof d?.maxAge||d?.requireIdToken?b0(a,b,c,d.expectedNonce,d.maxAge,d[a3],d.recognizedTokenTypes):b1(a,b,c,d?.[a3],d?.recognizedTokenTypes)}async function b0(a,b,c,d,e,f,g){let h=[];switch(d){case void 0:d=bZ;break;case bZ:break;default:bi(d,'"expectedNonce" argument'),h.push("nonce")}switch(e??=b.default_max_age){case void 0:e=b$;break;case b$:break;default:bh(e,!0,'"maxAge" argument'),h.push("auth_time")}let i=await bQ(a,b,c,h,f,g);bi(i.id_token,'"response" body "id_token" property',b7,{body:i});let j=bP(i);if(e!==b$){let a=bp()+bn(b),c=bo(b);if(j.auth_time+e<a-c)throw ba("too much time has elapsed since the last End-User authentication",cc,{claims:j,now:a,tolerance:c,claim:"auth_time"})}if(d===bZ){if(void 0!==j.nonce)throw ba('unexpected ID Token "nonce" claim value',cd,{expected:void 0,claims:j,claim:"nonce"})}else if(j.nonce!==d)throw ba('unexpected ID Token "nonce" claim value',cd,{expected:d,claims:j,claim:"nonce"});return i}async function b1(a,b,c,d,e){let f=await bQ(a,b,c,void 0,d,e),g=bP(f);if(g){if(void 0!==b.default_max_age){bh(b.default_max_age,!0,'"client.default_max_age"');let a=bp()+bn(b),c=bo(b);if(g.auth_time+b.default_max_age<a-c)throw ba("too much time has elapsed since the last End-User authentication",cc,{claims:g,now:a,tolerance:c,claim:"auth_time"})}if(void 0!==g.nonce)throw ba('unexpected ID Token "nonce" claim value',cd,{expected:void 0,claims:g,claim:"nonce"})}return f}let b2="OAUTH_WWW_AUTHENTICATE_CHALLENGE",b3="OAUTH_RESPONSE_BODY_ERROR",b4="OAUTH_UNSUPPORTED_OPERATION",b5="OAUTH_AUTHORIZATION_RESPONSE_ERROR",b6="OAUTH_PARSE_ERROR",b7="OAUTH_INVALID_RESPONSE",b8="OAUTH_RESPONSE_IS_NOT_JSON",b9="OAUTH_RESPONSE_IS_NOT_CONFORM",ca="OAUTH_HTTP_REQUEST_FORBIDDEN",cb="OAUTH_REQUEST_PROTOCOL_FORBIDDEN",cc="OAUTH_JWT_TIMESTAMP_CHECK_FAILED",cd="OAUTH_JWT_CLAIM_COMPARISON_FAILED",ce="OAUTH_JSON_ATTRIBUTE_COMPARISON_FAILED",cf="OAUTH_MISSING_SERVER_METADATA",cg="OAUTH_INVALID_SERVER_METADATA";async function ch(a,b,c,d,e,f){return bq(a),br(b),bi(d,'"grantType"'),bL(a,b,c,d,new URLSearchParams(e),f)}async function ci(a,b,c,d){return bQ(a,b,c,void 0,d?.[a3],d?.recognizedTokenTypes)}function cj(a){if(a.bodyUsed)throw a$('"response" body has been used already',aY)}function ck(a){let{algorithm:b}=a;if("number"!=typeof b.modulusLength||b.modulusLength<2048)throw new a8(`unsupported ${b.name} modulusLength`,{cause:a})}async function cl(a,b,c,d,e){let f,g,{0:h,1:i,length:j}=a.split(".");if(5===j)if(void 0!==e)a=await e(a),{0:h,1:i,length:j}=a.split(".");else throw new a8("JWE decryption is not configured",{cause:a});if(3!==j)throw ba("Invalid JWT",b7,a);try{f=JSON.parse(a6(a7(h)))}catch(a){throw ba("failed to parse JWT Header body as base64url encoded JSON",b6,a)}if(!bb(f))throw ba("JWT Header must be a top level object",b7,a);if(b(f),void 0!==f.crit)throw new a8('no JWT "crit" header parameter extensions are supported',{cause:{header:f}});try{g=JSON.parse(a6(a7(i)))}catch(a){throw ba("failed to parse JWT Payload body as base64url encoded JSON",b6,a)}if(!bb(g))throw ba("JWT Payload must be a top level object",b7,a);let k=bp()+c;if(void 0!==g.exp){if("number"!=typeof g.exp)throw ba('unexpected JWT "exp" (expiration time) claim type',b7,{claims:g});if(g.exp<=k-d)throw ba('unexpected JWT "exp" (expiration time) claim value, expiration is past current timestamp',cc,{claims:g,now:k,tolerance:d,claim:"exp"})}if(void 0!==g.iat&&"number"!=typeof g.iat)throw ba('unexpected JWT "iat" (issued at) claim type',b7,{claims:g});if(void 0!==g.iss&&"string"!=typeof g.iss)throw ba('unexpected JWT "iss" (issuer) claim type',b7,{claims:g});if(void 0!==g.nbf){if("number"!=typeof g.nbf)throw ba('unexpected JWT "nbf" (not before) claim type',b7,{claims:g});if(g.nbf>k+d)throw ba('unexpected JWT "nbf" (not before) claim value',cc,{claims:g,now:k,tolerance:d,claim:"nbf"})}if(void 0!==g.aud&&"string"!=typeof g.aud&&!Array.isArray(g.aud))throw ba('unexpected JWT "aud" (audience) claim type',b7,{claims:g});return{header:f,claims:g,jwt:a}}function cm(a,b,c,d){if(void 0!==a){if("string"==typeof a?d.alg!==a:!a.includes(d.alg))throw ba('unexpected JWT "alg" header parameter',b7,{header:d,expected:a,reason:"client configuration"});return}if(Array.isArray(b)){if(!b.includes(d.alg))throw ba('unexpected JWT "alg" header parameter',b7,{header:d,expected:b,reason:"authorization server metadata"});return}if(void 0!==c){if("string"==typeof c?d.alg!==c:"function"==typeof c?!c(d.alg):!c.includes(d.alg))throw ba('unexpected JWT "alg" header parameter',b7,{header:d,expected:c,reason:"default value"});return}throw ba('missing client or server configuration to verify used JWT "alg" header parameter',void 0,{client:a,issuer:b,fallback:c})}function cn(a,b){let{0:c,length:d}=a.getAll(b);if(d>1)throw ba(`"${b}" parameter must be provided only once`,b7);return c}let co=Symbol(),cp=Symbol();async function cq(a,b=bk){let c;try{c=await a.json()}catch(c){throw b(a),ba('failed to parse "response" body as JSON',b6,c)}if(!bb(c))throw ba('"response" body must be a top level object',b7,{body:c});return c}let cr=Symbol(),cs=Symbol(),ct={rE:"4.9.0"};function cu(a){return a&&!a.endsWith("/")?`${a}/`:a}function cv(a){return a&&a.startsWith("/")?a.substring(1,a.length):a}function cw(a){var b;let c=["path"in a&&a.path&&`Path=${a.path}`,"expires"in a&&(a.expires||0===a.expires)&&`Expires=${("number"==typeof a.expires?new Date(a.expires):a.expires).toUTCString()}`,"maxAge"in a&&"number"==typeof a.maxAge&&`Max-Age=${a.maxAge}`,"domain"in a&&a.domain&&`Domain=${a.domain}`,"secure"in a&&a.secure&&"Secure","httpOnly"in a&&a.httpOnly&&"HttpOnly","sameSite"in a&&a.sameSite&&`SameSite=${a.sameSite}`,"partitioned"in a&&a.partitioned&&"Partitioned","priority"in a&&a.priority&&`Priority=${a.priority}`].filter(Boolean),d=`${a.name}=${encodeURIComponent(null!=(b=a.value)?b:"")}`;return 0===c.length?d:`${d}; ${c.join("; ")}`}function cx(a){let b=new Map;for(let c of a.split(/; */)){if(!c)continue;let a=c.indexOf("=");if(-1===a){b.set(c,"true");continue}let[d,e]=[c.slice(0,a),c.slice(a+1)];try{b.set(d,decodeURIComponent(null!=e?e:"true"))}catch{}}return b}var cy=["strict","lax","none"],cz=["low","medium","high"],cA=class{constructor(a){this._parsed=new Map,this._headers=a;let b=a.get("cookie");if(b)for(let[a,c]of cx(b))this._parsed.set(a,{name:a,value:c})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed);if(!a.length)return c.map(([a,b])=>b);let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(([a])=>a===d).map(([a,b])=>b)}has(a){return this._parsed.has(a)}set(...a){let[b,c]=1===a.length?[a[0].name,a[0].value]:a,d=this._parsed;return d.set(b,{name:b,value:c}),this._headers.set("cookie",Array.from(d).map(([a,b])=>cw(b)).join("; ")),this}delete(a){let b=this._parsed,c=Array.isArray(a)?a.map(a=>b.delete(a)):b.delete(a);return this._headers.set("cookie",Array.from(b).map(([a,b])=>cw(b)).join("; ")),c}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(a=>`${a.name}=${encodeURIComponent(a.value)}`).join("; ")}},cB=class{constructor(a){var b,c,d;this._parsed=new Map,this._headers=a;let e=null!=(d=null!=(c=null==(b=a.getSetCookie)?void 0:b.call(a))?c:a.get("set-cookie"))?d:[];for(let a of Array.isArray(e)?e:function(a){if(!a)return[];var b,c,d,e,f,g=[],h=0;function i(){for(;h<a.length&&/\s/.test(a.charAt(h));)h+=1;return h<a.length}for(;h<a.length;){for(b=h,f=!1;i();)if(","===(c=a.charAt(h))){for(d=h,h+=1,i(),e=h;h<a.length&&"="!==(c=a.charAt(h))&&";"!==c&&","!==c;)h+=1;h<a.length&&"="===a.charAt(h)?(f=!0,h=e,g.push(a.substring(b,d)),b=h):h=d+1}else h+=1;(!f||h>=a.length)&&g.push(a.substring(b,a.length))}return g}(e)){let b=function(a){if(!a)return;let[[b,c],...d]=cx(a),{domain:e,expires:f,httponly:g,maxage:h,path:i,samesite:j,secure:k,partitioned:l,priority:m}=Object.fromEntries(d.map(([a,b])=>[a.toLowerCase().replace(/-/g,""),b]));{var n,o,p={name:b,value:decodeURIComponent(c),domain:e,...f&&{expires:new Date(f)},...g&&{httpOnly:!0},..."string"==typeof h&&{maxAge:Number(h)},path:i,...j&&{sameSite:(n=(n=j).toLowerCase(),cy.includes(n)?n:void 0)},...k&&{secure:!0},...m&&{priority:(o=(o=m).toLowerCase(),cz.includes(o)?o:void 0)},...l&&{partitioned:!0}};let a={};for(let b in p)p[b]&&(a[b]=p[b]);return a}}(a);b&&this._parsed.set(b.name,b)}}get(...a){let b="string"==typeof a[0]?a[0]:a[0].name;return this._parsed.get(b)}getAll(...a){var b;let c=Array.from(this._parsed.values());if(!a.length)return c;let d="string"==typeof a[0]?a[0]:null==(b=a[0])?void 0:b.name;return c.filter(a=>a.name===d)}has(a){return this._parsed.has(a)}set(...a){let[b,c,d]=1===a.length?[a[0].name,a[0].value,a[0]]:a,e=this._parsed;return e.set(b,function(a={name:"",value:""}){return"number"==typeof a.expires&&(a.expires=new Date(a.expires)),a.maxAge&&(a.expires=new Date(Date.now()+1e3*a.maxAge)),(null===a.path||void 0===a.path)&&(a.path="/"),a}({name:b,value:c,...d})),function(a,b){for(let[,c]of(b.delete("set-cookie"),a)){let a=cw(c);b.append("set-cookie",a)}}(e,this._headers),this}delete(...a){let[b,c]="string"==typeof a[0]?[a[0]]:[a[0].name,a[0]];return this.set({...c,name:b,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(cw).join("; ")}};let cC=require("crypto");"function"!=typeof cC.hkdf||process.versions.electron||(i=async(...a)=>new Promise((b,c)=>{cC.hkdf(...a,(a,d)=>{a?c(a):b(new Uint8Array(d))})}));let cD=async(a,b,c,d,e)=>(i||((a,b,c,d,e)=>{let f=parseInt(a.substr(3),10)>>3||20,g=(0,cC.createHmac)(a,c.byteLength?c:new Uint8Array(f)).update(b).digest(),h=Math.ceil(e/f),i=new Uint8Array(f*h+d.byteLength+1),j=0,k=0;for(let b=1;b<=h;b++)i.set(d,k),i[k+d.byteLength]=b,i.set((0,cC.createHmac)(a,g).update(i.subarray(j,k+d.byteLength+1)).digest(),k),j=k,k+=f;return i.slice(0,e)}))(a,b,c,d,e);function cE(a,b){if("string"==typeof a)return new TextEncoder().encode(a);if(!(a instanceof Uint8Array))throw TypeError(`"${b}"" must be an instance of Uint8Array or a string`);return a}async function cF(a,b,c,d,e){return cD(function(a){switch(a){case"sha256":case"sha384":case"sha512":case"sha1":return a;default:throw TypeError('unsupported "digest" value')}}(a),function(a){let b=cE(a,"ikm");if(!b.byteLength)throw TypeError('"ikm" must be at least one byte in length');return b}(b),cE(c,"salt"),function(a){let b=cE(a,"info");if(b.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return b}(d),function(a,b){if("number"!=typeof a||!Number.isInteger(a)||a<1)throw TypeError('"keylen" must be a positive integer');if(a>255*(parseInt(b.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return a}(e,a))}let cG=Symbol();function cH(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new H(`Unsupported JWE Algorithm: ${a}`)}}let cI=(a,b)=>{if(b.length<<3!==cH(a))throw new J("Invalid Initialization Vector length")},cJ=(a,b)=>{let c=a.byteLength<<3;if(c!==b)throw new J(`Invalid Content Encryption Key length. Expected ${b} bits, got ${c} bits`)};async function cK(a,b,c,d,e){if(!(c instanceof Uint8Array))throw TypeError(aw(c,"Uint8Array"));let f=parseInt(a.slice(1,4),10),g=await crypto.subtle.importKey("raw",c.subarray(f>>3),"AES-CBC",!1,["encrypt"]),h=await crypto.subtle.importKey("raw",c.subarray(0,f>>3),{hash:`SHA-${f<<1}`,name:"HMAC"},!1,["sign"]),i=new Uint8Array(await crypto.subtle.encrypt({iv:d,name:"AES-CBC"},g,b)),j=T(e,d,i,V(e.length<<3));return{ciphertext:i,tag:new Uint8Array((await crypto.subtle.sign("HMAC",h,j)).slice(0,f>>3)),iv:d}}async function cL(a,b,c,d,e){let f;c instanceof Uint8Array?f=await crypto.subtle.importKey("raw",c,"AES-GCM",!1,["encrypt"]):(au(c,a,"encrypt"),f=c);let g=new Uint8Array(await crypto.subtle.encrypt({additionalData:e,iv:d,name:"AES-GCM",tagLength:128},f,b)),h=g.slice(-16);return{ciphertext:g.slice(0,-16),tag:h,iv:d}}let cM=async(a,b,c,d,e)=>{if(!aC(c)&&!(c instanceof Uint8Array))throw TypeError(aw(c,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(d)cI(a,d);else d=crypto.getRandomValues(new Uint8Array(cH(a)>>3));switch(a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return c instanceof Uint8Array&&cJ(c,parseInt(a.slice(-3),10)),cK(a,b,c,d,e);case"A128GCM":case"A192GCM":case"A256GCM":return c instanceof Uint8Array&&cJ(c,parseInt(a.slice(1,4),10)),cL(a,b,c,d,e);default:throw new H("Unsupported JWE Content Encryption Algorithm")}};function cN(a,b){if(a.algorithm.length!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function cO(a,b,c){return a instanceof Uint8Array?crypto.subtle.importKey("raw",a,"AES-KW",!0,[c]):(au(a,b,c),a)}async function cP(a,b,c){let d=await cO(b,a,"wrapKey");cN(d,a);let e=await crypto.subtle.importKey("raw",c,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",e,d,"AES-KW"))}async function cQ(a,b,c){let d=await cO(b,a,"unwrapKey");cN(d,a);let e=await crypto.subtle.unwrapKey("raw",c,d,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",e))}let cR=async(a,b)=>{let c=`SHA-${a.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(c,b))};function cS(a){return T(W(a.length),a)}async function cT(a,b,c){let d=b>>3,e=Math.ceil(d/32),f=new Uint8Array(32*e);for(let b=1;b<=e;b++){let d=new Uint8Array(4+a.length+c.length);d.set(W(b),0),d.set(a,4),d.set(c,4+a.length);let e=await cR("sha256",d);f.set(e,(b-1)*32)}return f.slice(0,d)}async function cU(a,b,c,d,e=new Uint8Array(0),f=new Uint8Array(0)){var g;au(a,"ECDH"),au(b,"ECDH","deriveBits");let h=cS(R.encode(c)),i=cS(e),j=cS(f),k=T(h,i,j,W(d),new Uint8Array(0));return cT(new Uint8Array(await crypto.subtle.deriveBits({name:a.algorithm.name,public:a},b,"X25519"===(g=a).algorithm.name?256:Math.ceil(parseInt(g.algorithm.namedCurve.slice(-3),10)/8)<<3)),d,k)}function cV(a){switch(a.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return"X25519"===a.algorithm.name}}async function cW(a,b,c,d){if(!(a instanceof Uint8Array)||a.length<8)throw new J("PBES2 Salt Input must be 8 or more octets");let e=T(R.encode(b),new Uint8Array([0]),a),f=parseInt(b.slice(13,16),10),g={hash:`SHA-${b.slice(8,11)}`,iterations:c,name:"PBKDF2",salt:e},h=await (d instanceof Uint8Array?crypto.subtle.importKey("raw",d,"PBKDF2",!1,["deriveBits"]):(au(d,b,"deriveBits"),d));return new Uint8Array(await crypto.subtle.deriveBits(g,h,f))}async function cX(a,b,c,d=2048,e=crypto.getRandomValues(new Uint8Array(16))){let f=await cW(e,a,d,b);return{encryptedKey:await cP(a.slice(-6),f,c),p2c:d,p2s:Z(e)}}async function cY(a,b,c,d,e){let f=await cW(e,a,d,b);return cQ(a.slice(-6),f,c)}let cZ=a=>{switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new H(`alg ${a} is not supported either by JOSE or your javascript runtime`)}};async function c$(a,b,c){return au(b,a,"encrypt"),ap(a,b),new Uint8Array(await crypto.subtle.encrypt(cZ(a),b,c))}async function c_(a,b,c){return au(b,a,"decrypt"),ap(a,b),new Uint8Array(await crypto.subtle.decrypt(cZ(a),b,c))}function c0(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new H(`Unsupported JWE Algorithm: ${a}`)}}let c1=a=>crypto.getRandomValues(new Uint8Array(c0(a)>>3));async function c2(a){if(aD(a))if("secret"!==a.type)return a.export({format:"jwk"});else a=a.export();if(a instanceof Uint8Array)return{kty:"oct",k:Z(a)};if(!aC(a))throw TypeError(aw(a,"CryptoKey","KeyObject","Uint8Array"));if(!a.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:b,key_ops:c,alg:d,use:e,...f}=await crypto.subtle.exportKey("jwk",a);return"AKP"===f.kty&&(f.alg=d),f}async function c3(a){return c2(a)}async function c4(a,b){if(!(a instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(b instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let c={name:"HMAC",hash:"SHA-256"},d=await crypto.subtle.generateKey(c,!1,["sign"]),e=new Uint8Array(await crypto.subtle.sign(c,d,a)),f=new Uint8Array(await crypto.subtle.sign(c,d,b)),g=0,h=-1;for(;++h<32;)g|=e[h]^f[h];return 0===g}async function c5(a,b,c,d,e,f){let g,h;if(!(b instanceof Uint8Array))throw TypeError(aw(b,"Uint8Array"));let i=parseInt(a.slice(1,4),10),j=await crypto.subtle.importKey("raw",b.subarray(i>>3),"AES-CBC",!1,["decrypt"]),k=await crypto.subtle.importKey("raw",b.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),l=T(f,d,c,V(f.length<<3)),m=new Uint8Array((await crypto.subtle.sign("HMAC",k,l)).slice(0,i>>3));try{g=await c4(e,m)}catch{}if(!g)throw new I;try{h=new Uint8Array(await crypto.subtle.decrypt({iv:d,name:"AES-CBC"},j,c))}catch{}if(!h)throw new I;return h}async function c6(a,b,c,d,e,f){let g;b instanceof Uint8Array?g=await crypto.subtle.importKey("raw",b,"AES-GCM",!1,["decrypt"]):(au(b,a,"decrypt"),g=b);try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:f,iv:d,name:"AES-GCM",tagLength:128},g,T(c,e)))}catch{throw new I}}let c7=async(a,b,c,d,e,f)=>{if(!aC(b)&&!(b instanceof Uint8Array))throw TypeError(aw(b,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!d)throw new J("JWE Initialization Vector missing");if(!e)throw new J("JWE Authentication Tag missing");switch(cI(a,d),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return b instanceof Uint8Array&&cJ(b,parseInt(a.slice(-3),10)),c5(a,b,c,d,e,f);case"A128GCM":case"A192GCM":case"A256GCM":return b instanceof Uint8Array&&cJ(b,parseInt(a.slice(1,4),10)),c6(a,b,c,d,e,f);default:throw new H("Unsupported JWE Content Encryption Algorithm")}};async function c8(a,b,c,d){let e=a.slice(0,7),f=await cM(e,c,b,d,new Uint8Array(0));return{encryptedKey:f.ciphertext,iv:Z(f.iv),tag:Z(f.tag)}}async function c9(a,b,c,d,e){return c7(a.slice(0,7),b,c,d,e,new Uint8Array(0))}let da=async(a,b,c,d,e={})=>{let f,g,h;switch(a){case"dir":h=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let i;if(aB(c),!cV(c))throw new H("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:j,apv:k}=e;i=e.epk?await aM(e.epk,a):(await crypto.subtle.generateKey(c.algorithm,!0,["deriveBits"])).privateKey;let{x:l,y:m,crv:n,kty:o}=await c3(i),p=await cU(c,i,"ECDH-ES"===a?b:a,"ECDH-ES"===a?c0(b):parseInt(a.slice(-5,-2),10),j,k);if(g={epk:{x:l,crv:n,kty:o}},"EC"===o&&(g.epk.y=m),j&&(g.apu=Z(j)),k&&(g.apv=Z(k)),"ECDH-ES"===a){h=p;break}h=d||c1(b);let q=a.slice(-6);f=await cP(q,p,h);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":h=d||c1(b),aB(c),f=await c$(a,c,h);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{h=d||c1(b);let{p2c:i,p2s:j}=e;({encryptedKey:f,...g}=await cX(a,c,h,i,j));break}case"A128KW":case"A192KW":case"A256KW":h=d||c1(b),f=await cP(a,c,h);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{h=d||c1(b);let{iv:i}=e;({encryptedKey:f,...g}=await c8(a,c,h,i));break}default:throw new H('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:h,encryptedKey:f,parameters:g}};class db{#n;#o;#p;#q;#r;#s;#t;#u;constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#n=a}setKeyManagementParameters(a){if(this.#u)throw TypeError("setKeyManagementParameters can only be called once");return this.#u=a,this}setProtectedHeader(a){if(this.#o)throw TypeError("setProtectedHeader can only be called once");return this.#o=a,this}setSharedUnprotectedHeader(a){if(this.#p)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#p=a,this}setUnprotectedHeader(a){if(this.#q)throw TypeError("setUnprotectedHeader can only be called once");return this.#q=a,this}setAdditionalAuthenticatedData(a){return this.#r=a,this}setContentEncryptionKey(a){if(this.#s)throw TypeError("setContentEncryptionKey can only be called once");return this.#s=a,this}setInitializationVector(a){if(this.#t)throw TypeError("setInitializationVector can only be called once");return this.#t=a,this}async encrypt(a,b){let c,d,e,f,g;if(!this.#o&&!this.#q&&!this.#p)throw new J("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!aA(this.#o,this.#q,this.#p))throw new J("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let h={...this.#o,...this.#q,...this.#p};if(aJ(J,new Map,b?.crit,this.#o,h),void 0!==h.zip)throw new H('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:i,enc:j}=h;if("string"!=typeof i||!i)throw new J('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof j||!j)throw new J('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(this.#s&&("dir"===i||"ECDH-ES"===i))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${i}`);aI("dir"===i?j:i,a,"encrypt");{let e,f=await aM(a,i);({cek:d,encryptedKey:c,parameters:e}=await da(i,j,f,this.#s,this.#u)),e&&(b&&cG in b?this.#q?this.#q={...this.#q,...e}:this.setUnprotectedHeader(e):this.#o?this.#o={...this.#o,...e}:this.setProtectedHeader(e))}f=this.#o?R.encode(Z(JSON.stringify(this.#o))):R.encode(""),this.#r?(g=Z(this.#r),e=T(f,R.encode("."),R.encode(g))):e=f;let{ciphertext:k,tag:l,iv:m}=await cM(j,this.#n,d,this.#t,e),n={ciphertext:Z(k)};return m&&(n.iv=Z(m)),l&&(n.tag=Z(l)),c&&(n.encrypted_key=Z(c)),g&&(n.aad=g),this.#o&&(n.protected=S.decode(f)),this.#p&&(n.unprotected=this.#p),this.#q&&(n.header=this.#q),n}}class dc{#v;constructor(a){this.#v=new db(a)}setContentEncryptionKey(a){return this.#v.setContentEncryptionKey(a),this}setInitializationVector(a){return this.#v.setInitializationVector(a),this}setProtectedHeader(a){return this.#v.setProtectedHeader(a),this}setKeyManagementParameters(a){return this.#v.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this.#v.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}class dd{#s;#t;#u;#o;#w;#x;#y;#z;constructor(a={}){this.#z=new aV(a)}setIssuer(a){return this.#z.iss=a,this}setSubject(a){return this.#z.sub=a,this}setAudience(a){return this.#z.aud=a,this}setJti(a){return this.#z.jti=a,this}setNotBefore(a){return this.#z.nbf=a,this}setExpirationTime(a){return this.#z.exp=a,this}setIssuedAt(a){return this.#z.iat=a,this}setProtectedHeader(a){if(this.#o)throw TypeError("setProtectedHeader can only be called once");return this.#o=a,this}setKeyManagementParameters(a){if(this.#u)throw TypeError("setKeyManagementParameters can only be called once");return this.#u=a,this}setContentEncryptionKey(a){if(this.#s)throw TypeError("setContentEncryptionKey can only be called once");return this.#s=a,this}setInitializationVector(a){if(this.#t)throw TypeError("setInitializationVector can only be called once");return this.#t=a,this}replicateIssuerAsHeader(){return this.#w=!0,this}replicateSubjectAsHeader(){return this.#x=!0,this}replicateAudienceAsHeader(){return this.#y=!0,this}async encrypt(a,b){let c=new dc(this.#z.data());return this.#o&&(this.#w||this.#x||this.#y)&&(this.#o={...this.#o,iss:this.#w?this.#z.iss:void 0,sub:this.#x?this.#z.sub:void 0,aud:this.#y?this.#z.aud:void 0}),c.setProtectedHeader(this.#o),this.#t&&c.setInitializationVector(this.#t),this.#s&&c.setContentEncryptionKey(this.#s),this.#u&&c.setKeyManagementParameters(this.#u),c.encrypt(a,b)}}let de=async(a,b,c,d,e)=>{switch(a){case"dir":if(void 0!==c)throw new J("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new J("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let e,f;if(!ae(d.epk))throw new J('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(aB(b),!cV(b))throw new H("ECDH with the provided key is not allowed or not supported by your javascript runtime");let g=await ag(d.epk,a);if(aB(g),void 0!==d.apu){if("string"!=typeof d.apu)throw new J('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{e=Y(d.apu)}catch{throw new J("Failed to base64url decode the apu")}}if(void 0!==d.apv){if("string"!=typeof d.apv)throw new J('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{f=Y(d.apv)}catch{throw new J("Failed to base64url decode the apv")}}let h=await cU(g,b,"ECDH-ES"===a?d.enc:a,"ECDH-ES"===a?c0(d.enc):parseInt(a.slice(-5,-2),10),e,f);if("ECDH-ES"===a)return h;if(void 0===c)throw new J("JWE Encrypted Key missing");return cQ(a.slice(-6),h,c)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new J("JWE Encrypted Key missing");return aB(b),c_(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let f;if(void 0===c)throw new J("JWE Encrypted Key missing");if("number"!=typeof d.p2c)throw new J('JOSE Header "p2c" (PBES2 Count) missing or invalid');let g=e?.maxPBES2Count||1e4;if(d.p2c>g)throw new J('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof d.p2s)throw new J('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{f=Y(d.p2s)}catch{throw new J("Failed to base64url decode the p2s")}return cY(a,b,c,d.p2c,f)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new J("JWE Encrypted Key missing");return cQ(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let e,f;if(void 0===c)throw new J("JWE Encrypted Key missing");if("string"!=typeof d.iv)throw new J('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof d.tag)throw new J('JOSE Header "tag" (Authentication Tag) missing or invalid');try{e=Y(d.iv)}catch{throw new J("Failed to base64url decode the iv")}try{f=Y(d.tag)}catch{throw new J("Failed to base64url decode the tag")}return c9(a,b,c,e,f)}default:throw new H('Invalid or unsupported "alg" (JWE Algorithm) header value')}};async function df(a,b,c){let d,e,f,g,h,i,j;if(!ae(a))throw new J("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new J("JOSE Header missing");if(void 0!==a.iv&&"string"!=typeof a.iv)throw new J("JWE Initialization Vector incorrect type");if("string"!=typeof a.ciphertext)throw new J("JWE Ciphertext missing or incorrect type");if(void 0!==a.tag&&"string"!=typeof a.tag)throw new J("JWE Authentication Tag incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new J("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new J("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new J("JWE AAD incorrect type");if(void 0!==a.header&&!ae(a.header))throw new J("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!ae(a.unprotected))throw new J("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=Y(a.protected);d=JSON.parse(S.decode(b))}catch{throw new J("JWE Protected Header is invalid")}if(!aA(d,a.header,a.unprotected))throw new J("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let k={...d,...a.header,...a.unprotected};if(aJ(J,new Map,c?.crit,d,k),void 0!==k.zip)throw new H('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:l,enc:m}=k;if("string"!=typeof l||!l)throw new J("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof m||!m)throw new J("missing JWE Encryption Algorithm (enc) in JWE Header");let n=c&&aK("keyManagementAlgorithms",c.keyManagementAlgorithms),o=c&&aK("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(n&&!n.has(l)||!n&&l.startsWith("PBES2"))throw new G('"alg" (Algorithm) Header Parameter value not allowed');if(o&&!o.has(m))throw new G('"enc" (Encryption Algorithm) Header Parameter value not allowed');if(void 0!==a.encrypted_key)try{e=Y(a.encrypted_key)}catch{throw new J("Failed to base64url decode the encrypted_key")}let p=!1;"function"==typeof b&&(b=await b(d,a),p=!0),aI("dir"===l?m:l,b,"decrypt");let q=await aM(b,l);try{f=await de(l,q,e,k,c)}catch(a){if(a instanceof TypeError||a instanceof J||a instanceof H)throw a;f=c1(m)}if(void 0!==a.iv)try{g=Y(a.iv)}catch{throw new J("Failed to base64url decode the iv")}if(void 0!==a.tag)try{h=Y(a.tag)}catch{throw new J("Failed to base64url decode the tag")}let r=R.encode(a.protected??"");i=void 0!==a.aad?T(r,R.encode("."),R.encode(a.aad)):r;try{j=Y(a.ciphertext)}catch{throw new J("Failed to base64url decode the ciphertext")}let s={plaintext:await c7(m,f,j,g,h,i)};if(void 0!==a.protected&&(s.protectedHeader=d),void 0!==a.aad)try{s.additionalAuthenticatedData=Y(a.aad)}catch{throw new J("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(s.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(s.unprotectedHeader=a.header),p)?{...s,key:q}:s}async function dg(a,b,c){if(a instanceof Uint8Array&&(a=S.decode(a)),"string"!=typeof a)throw new J("Compact JWE must be a string or Uint8Array");let{0:d,1:e,2:f,3:g,4:h,length:i}=a.split(".");if(5!==i)throw new J("Invalid Compact JWE");let j=await df({ciphertext:g,iv:f||void 0,protected:d,tag:h||void 0,encrypted_key:e||void 0},b,c),k={plaintext:j.plaintext,protectedHeader:j.protectedHeader};return"function"==typeof b?{...k,key:j.key}:k}async function dh(a,b,c){let d=await dg(a,b,c),e=aU(d.protectedHeader,d.plaintext,c),{protectedHeader:f}=d;if(void 0!==f.iss&&f.iss!==e.iss)throw new E('replicated "iss" claim header parameter mismatch',e,"iss","mismatch");if(void 0!==f.sub&&f.sub!==e.sub)throw new E('replicated "sub" claim header parameter mismatch',e,"sub","mismatch");if(void 0!==f.aud&&JSON.stringify(f.aud)!==JSON.stringify(e.aud))throw new E('replicated "aud" claim header parameter mismatch',e,"aud","mismatch");let g={payload:e,protectedHeader:f};return"function"==typeof b?{...g,key:d.key}:g}let di="sha256",dj="JWE CEK";async function dk(a,b,c,d){let e=await cF(di,b,"",dj,32);return(await new dd(a).setProtectedHeader({enc:"A256GCM",alg:"dir",...d}).setExpirationTime(c).encrypt(e)).toString()}async function dl(a,b,c){try{let d=await cF(di,b,"",dj,32);return await dh(a,d,{...c,clockTolerance:15})}catch(a){if("ERR_JWT_EXPIRED"===a.code)return null;throw a}}async function dm(a,b,c){if(!b)return;let[d,e]=b.split("."),f={protected:Z(JSON.stringify({alg:"HS256",b64:!1,crit:["b64"]})),payload:`${a}=${d}`,signature:e},g=await cF("sha256",c,"","JWS Cookie Signing",32);try{return await aN(f,g,{algorithms:["HS256"]}),d}catch(a){return}}let dn=RegExp("__(\\d+)$"),dp=/\.(\d+)$/,dq=(a,b)=>{let c=b?dp.exec(a):dn.exec(a);if(c)return parseInt(c[1],10)},dr=(a,b,c)=>{let d=new RegExp(c?`^${b}${dp.source}$`:`^${b}__\\d+$`);return a.getAll().filter(a=>d.test(a.name))};function ds(a,b,c){let d=b.get(a);if(d?.value)return d.value;let e=dr(b,a,c).sort((a,b)=>dq(a.name,c)-dq(b.name,c));if(0===e.length)return;let f=dq(e[e.length-1].name,c);return e.length!==f+1?void console.warn(`Incomplete chunked cookie '${a}': Found ${e.length} chunks, expected ${f+1}`):e.map(a=>a.value).join("")}function dt(a,b,c,d,e){dv(c,a,e),dr(b,a,d).forEach(a=>{dv(c,a.name,e)})}function du(a){a.headers.set("Cache-Control","private, no-cache, no-store, must-revalidate, max-age=0"),a.headers.set("Pragma","no-cache"),a.headers.set("Expires","0")}function dv(a,b,c){let d={maxAge:0};c?.domain&&(d.domain=c.domain),c?.path&&(d.path=c.path),a.set(b,"",d)}let dw=["sub","name","nickname","given_name","family_name","picture","email","email_verified","org_id"],dx=["client_id","redirect_uri","response_type","code_challenge","code_challenge_method","state","nonce"],dy="openid profile email offline_access";function dz(a,b){return new URL(cv((a=>{var b;let c=process.env.NEXT_PUBLIC_BASE_PATH;return c?cu((b=c)&&!b.startsWith("/")?`/${b}`:b)+cv(a):a})(a)),cu(b))}class dA{constructor(a){if(this.fetch=a.fetch||fetch,this.jwksCache=a.jwksCache||{},this.allowInsecureRequests=a.allowInsecureRequests??!1,this.httpOptions=()=>{let b=new Headers,c=a.enableTelemetry??!0,d=a.httpTimeout??5e3;if(c){let a="nextjs-auth0",c=ct.rE;b.set("User-Agent",`${a}/${c}`),b.set("Auth0-Client",dB(JSON.stringify({name:a,version:c})))}return{signal:AbortSignal.timeout(d),headers:b}},this.allowInsecureRequests&&console.warn("allowInsecureRequests is enabled in a production environment. This is not recommended."),this.transactionStore=a.transactionStore,this.sessionStore=a.sessionStore,this.domain=a.domain,this.clientMetadata={client_id:a.clientId},this.clientSecret=a.clientSecret,this.authorizationParameters=a.authorizationParameters||{scope:dy},this.pushedAuthorizationRequests=a.pushedAuthorizationRequests??!1,this.clientAssertionSigningKey=a.clientAssertionSigningKey,this.clientAssertionSigningAlg=a.clientAssertionSigningAlg||"RS256",this.authorizationParameters.scope||(this.authorizationParameters.scope=dy),!this.authorizationParameters.scope.split(" ").map(a=>a.trim()).includes("openid"))throw Error("The 'openid' scope must be included in the set of scopes. See https://auth0.com/docs");this.appBaseUrl=a.appBaseUrl,this.signInReturnToPath=a.signInReturnToPath||"/";let b=["auto","oidc","v2"],c=a.logoutStrategy||"auto";b.includes(c)||(console.error(`Invalid logoutStrategy: ${c}. Must be one of: ${b.join(", ")}. Defaulting to "auto"`),c="auto"),this.logoutStrategy=c,this.beforeSessionSaved=a.beforeSessionSaved,this.onCallback=a.onCallback||this.defaultOnCallback,this.routes=a.routes,this.enableAccessTokenEndpoint=a.enableAccessTokenEndpoint??!0,this.noContentProfileResponseWhenUnauthenticated=a.noContentProfileResponseWhenUnauthenticated??!1}async handler(a){let{pathname:b}=a.nextUrl,c=b.endsWith("/")?b.slice(0,-1):b,d=a.method;if("GET"===d&&c===this.routes.login)return this.handleLogin(a);{if("GET"===d&&c===this.routes.logout)return this.handleLogout(a);if("GET"===d&&c===this.routes.callback)return this.handleCallback(a);if("GET"===d&&c===this.routes.profile)return this.handleProfile(a);if("GET"===d&&c===this.routes.accessToken&&this.enableAccessTokenEndpoint)return this.handleAccessToken(a);if("POST"===d&&c===this.routes.backChannelLogout)return this.handleBackChannelLogout(a);let b=B.NextResponse.next(),e=await this.sessionStore.get(a.cookies);return e&&(await this.sessionStore.set(a.cookies,b.cookies,{...e}),du(b)),b}}async startInteractiveLogin(a={}){let b=dz(this.routes.callback,this.appBaseUrl),c=this.signInReturnToPath;if(a.returnTo){let b=new URL(this.authorizationParameters.redirect_uri||this.appBaseUrl),d=function(a,b){let c;try{c=new URL(a,b)}catch(a){return}if(c.origin===b.origin)return c}(a.returnTo,b);d&&(c=d.pathname+d.search+d.hash)}let d=bl(),e=await bm(d),f=bl(),g=bl(),h=new URLSearchParams;h.set("client_id",this.clientMetadata.client_id),h.set("redirect_uri",b.toString()),h.set("response_type","code"),h.set("code_challenge",e),h.set("code_challenge_method","S256"),h.set("state",f),h.set("nonce",g),Object.entries({...this.authorizationParameters,...a.authorizationParameters}).forEach(([a,b])=>{dx.includes(a)||null==b||h.set(a,String(b))});let i={nonce:g,maxAge:this.authorizationParameters.max_age,codeVerifier:d,responseType:"code",state:f,returnTo:c},[j,k]=await this.authorizationUrl(h);if(j)return new B.NextResponse("An error occured while trying to initiate the login request.",{status:500});let l=B.NextResponse.redirect(k.toString());return await this.transactionStore.save(l.cookies,i),l}async handleLogin(a){let b=Object.fromEntries(a.nextUrl.searchParams.entries()),c={authorizationParameters:this.pushedAuthorizationRequests?{}:b,returnTo:b.returnTo};return this.startInteractiveLogin(c)}async handleLogout(a){let b,c=await this.sessionStore.get(a.cookies),[d,e]=await this.discoverAuthorizationServerMetadata();if(d){let b=new B.NextResponse("An error occured while trying to initiate the logout request.",{status:500});return await this.sessionStore.delete(a.cookies,b.cookies),await this.transactionStore.deleteAll(a.cookies,b.cookies),b}let f=a.nextUrl.searchParams.get("returnTo")||this.appBaseUrl,g=()=>{let a=new URL("/v2/logout",this.issuer);return a.searchParams.set("returnTo",f),a.searchParams.set("client_id",this.clientMetadata.client_id),B.NextResponse.redirect(a)},h=()=>{let a=new URL(e.end_session_endpoint);return a.searchParams.set("client_id",this.clientMetadata.client_id),a.searchParams.set("post_logout_redirect_uri",f),c?.internal.sid&&a.searchParams.set("logout_hint",c.internal.sid),c?.tokenSet.idToken&&a.searchParams.set("id_token_hint",c.tokenSet.idToken),B.NextResponse.redirect(a)};if("v2"===this.logoutStrategy)b=g();else if("oidc"===this.logoutStrategy){if(!e.end_session_endpoint){let b=new B.NextResponse("OIDC RP-Initiated Logout is not supported by the authorization server. Enable it or use a different logout strategy.",{status:500});return await this.sessionStore.delete(a.cookies,b.cookies),await this.transactionStore.deleteAll(a.cookies,b.cookies),b}b=h()}else e.end_session_endpoint?b=h():(console.warn("The Auth0 client does not have RP-initiated logout enabled, the user will be redirected to the `/v2/logout` endpoint instead. Learn how to enable it here: https://auth0.com/docs/authenticate/login/logout/log-users-out-of-auth0#enable-endpoint-discovery"),b=g());return await this.sessionStore.delete(a.cookies,b.cookies),du(b),await this.transactionStore.deleteAll(a.cookies,b.cookies),b}async handleCallback(a){let b,c,d,e=a.nextUrl.searchParams.get("state");if(!e)return this.handleCallbackError(new C.mv,{},a);let f=await this.transactionStore.get(a.cookies,e);if(!f)return this.onCallback(new C.Pp,{},null);let g=f.payload,h={returnTo:g.returnTo},[i,j]=await this.discoverAuthorizationServerMetadata();if(i)return this.handleCallbackError(i,h,a,e);try{b=function(a,b,c,d){var e;if(bq(a),br(b),c instanceof URL&&(c=c.searchParams),!(c instanceof URLSearchParams))throw a$('"parameters" must be an instance of URLSearchParams, or URL',aZ);if(cn(c,"response"))throw ba('"parameters" contains a JARM response, use validateJwtAuthResponse() instead of validateAuthResponse()',b7,{parameters:c});let f=cn(c,"iss"),g=cn(c,"state");if(!f&&a.authorization_response_iss_parameter_supported)throw ba('response parameter "iss" (issuer) missing',b7,{parameters:c});if(f&&f!==a.issuer)throw ba('unexpected "iss" (issuer) response parameter value',b7,{expected:a.issuer,parameters:c});switch(d){case void 0:case cp:if(void 0!==g)throw ba('unexpected "state" response parameter encountered',b7,{expected:void 0,parameters:c});break;case co:break;default:if(bi(d,'"expectedState" argument'),g!==d)throw ba(void 0===g?'response parameter "state" missing':'unexpected "state" response parameter value',b7,{expected:d,parameters:c})}if(cn(c,"error"))throw new bz("authorization response from the server is an error",{cause:c});let h=cn(c,"id_token"),i=cn(c,"token");if(void 0!==h||void 0!==i)throw new a8("implicit and hybrid flows are not supported");return e=new URLSearchParams(c),bU.add(e),e}(j,this.clientMetadata,a.nextUrl.searchParams,g.state)}catch(b){return this.handleCallbackError(new C.yi({cause:new C.gz({code:b.error,message:b.error_description})}),h,a,e)}try{let a=dz(this.routes.callback,this.appBaseUrl);c=await bW(j,this.clientMetadata,await this.getClientAuth(),b,a.toString(),g.codeVerifier,{...this.httpOptions(),[a2]:this.fetch,[a_]:this.allowInsecureRequests})}catch(b){return this.handleCallbackError(new C.S$(b.message),h,a,e)}try{d=await b_(j,this.clientMetadata,c,{expectedNonce:g.nonce,maxAge:g.maxAge,requireIdToken:!0})}catch(b){return this.handleCallbackError(new C.nc({cause:new C.gz({code:b.error,message:b.error_description})}),h,a,e)}let k=bP(d),l={user:k,tokenSet:{accessToken:d.access_token,idToken:d.id_token,scope:d.scope,refreshToken:d.refresh_token,expiresAt:Math.floor(Date.now()/1e3)+Number(d.expires_in)},internal:{sid:k.sid,createdAt:Math.floor(Date.now()/1e3)}},m=await this.onCallback(null,h,l);return l=await this.finalizeSession(l,d.id_token),await this.sessionStore.set(a.cookies,m.cookies,l,!0),du(m),await this.transactionStore.delete(m.cookies,e),m}async handleProfile(a){let b=await this.sessionStore.get(a.cookies);if(!b)return this.noContentProfileResponseWhenUnauthenticated?new B.NextResponse(null,{status:204}):new B.NextResponse(null,{status:401});let c=B.NextResponse.json(b?.user);return du(c),c}async handleAccessToken(a){let b=await this.sessionStore.get(a.cookies);if(!b)return B.NextResponse.json({error:{message:"The user does not have an active session.",code:C.Pi.MISSING_SESSION}},{status:401});let[c,d]=await this.getTokenSet(b.tokenSet);if(c)return B.NextResponse.json({error:{message:c.message,code:c.code}},{status:401});let{tokenSet:e,idTokenClaims:f}=d,g=B.NextResponse.json({token:e.accessToken,scope:e.scope,expires_at:e.expiresAt});if(e.accessToken!==b.tokenSet.accessToken||e.expiresAt!==b.tokenSet.expiresAt||e.refreshToken!==b.tokenSet.refreshToken){f&&(b.user=f);let c=await this.finalizeSession(b,e.idToken);await this.sessionStore.set(a.cookies,g.cookies,{...c,tokenSet:e}),du(g)}return g}async handleBackChannelLogout(a){if(!this.sessionStore.store)return new B.NextResponse("A session data store is not configured.",{status:500});if(!this.sessionStore.store.deleteByLogoutToken)return new B.NextResponse("Back-channel logout is not supported by the session data store.",{status:500});let b=new URLSearchParams(await a.text()).get("logout_token");if(!b)return new B.NextResponse("Missing `logout_token` in the request body.",{status:400});let[c,d]=await this.verifyLogoutToken(b);return c?new B.NextResponse(c.message,{status:400}):(await this.sessionStore.store.deleteByLogoutToken(d),new B.NextResponse(null,{status:204}))}async getTokenSet(a,b){if(!a.refreshToken&&a.expiresAt<=Date.now()/1e3)return[new C.oc(C.Pi.MISSING_REFRESH_TOKEN,"The access token has expired and a refresh token was not provided. The user needs to re-authenticate."),null];if(a.refreshToken&&(b||a.expiresAt<=Date.now()/1e3)){let b,[c,d]=await this.discoverAuthorizationServerMetadata();if(c)return[c,null];let e=await bM(d,this.clientMetadata,await this.getClientAuth(),a.refreshToken,{...this.httpOptions(),[a2]:this.fetch,[a_]:this.allowInsecureRequests});try{b=await bR(d,this.clientMetadata,e)}catch(a){return[new C.oc(C.Pi.FAILED_TO_REFRESH_TOKEN,"The access token has expired and there was an error while trying to refresh it.",new C.gz({code:a.error,message:a.error_description})),null]}let f=bP(b),g=Math.floor(Date.now()/1e3)+Number(b.expires_in),h={...a,accessToken:b.access_token,idToken:b.id_token,expiresAt:g};return b.refresh_token?h.refreshToken=b.refresh_token:h.refreshToken=a.refreshToken,[null,{tokenSet:h,idTokenClaims:f}]}return[null,{tokenSet:a,idTokenClaims:void 0}]}async discoverAuthorizationServerMetadata(){if(this.authorizationServerMetadata)return[null,this.authorizationServerMetadata];let a=new URL(this.issuer);try{let b=await bg(a,{...this.httpOptions(),[a2]:this.fetch,[a_]:this.allowInsecureRequests}).then(b=>bj(a,b));return this.authorizationServerMetadata=b,[null,b]}catch(b){return console.error(`An error occured while performing the discovery request. issuer=${a.toString()}, error:`,b),[new C.P3("Discovery failed for the OpenID Connect configuration."),null]}}async defaultOnCallback(a,b){return a?new B.NextResponse(a.message,{status:500}):B.NextResponse.redirect(dz(b.returnTo||"/",this.appBaseUrl))}async handleCallbackError(a,b,c,d){let e=await this.onCallback(a,b,null);return d&&await this.transactionStore.delete(e.cookies,d),e}async verifyLogoutToken(a){let[b,c]=await this.discoverAuthorizationServerMetadata();if(b)return[b,null];let d=function(a,b){let c=new ao(a,b),d=async(a,b)=>c.getKey(a,b);return Object.defineProperties(d,{coolingDown:{get:()=>c.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>c.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>c.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>c.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>c.jwks(),enumerable:!0,configurable:!1,writable:!1}}),d}(new URL(c.jwks_uri),{[an]:this.jwksCache}),{payload:e}=await aW(a,d,{issuer:c.issuer,audience:this.clientMetadata.client_id,algorithms:["RS256"],requiredClaims:["iat"]});return"sid"in e||"sub"in e?"sid"in e&&"string"!=typeof e.sid?[new C.pp('"sid" claim must be a string'),null]:"sub"in e&&"string"!=typeof e.sub?[new C.pp('"sub" claim must be a string'),null]:"nonce"in e?[new C.pp('"nonce" claim is prohibited'),null]:"events"in e?"object"!=typeof e.events||null===e.events?[new C.pp('"events" claim must be an object'),null]:"http://schemas.openid.net/event/backchannel-logout"in e.events?"object"!=typeof e.events["http://schemas.openid.net/event/backchannel-logout"]?[new C.pp('"http://schemas.openid.net/event/backchannel-logout" member in the "events" claim must be an object'),null]:[null,{sid:e.sid,sub:e.sub}]:[new C.pp('"http://schemas.openid.net/event/backchannel-logout" member is missing in the "events" claim'),null]:[new C.pp('"events" claim is missing'),null]:[new C.pp('either "sid" or "sub" (or both) claims must be present'),null]}async authorizationUrl(a){let[b,c]=await this.discoverAuthorizationServerMetadata();if(b)return[b,null];if(this.pushedAuthorizationRequests&&!c.pushed_authorization_request_endpoint)return console.error("The Auth0 tenant does not have pushed authorization requests enabled. Learn how to enable it here: https://auth0.com/docs/get-started/applications/configure-par"),[Error("The authorization server does not support pushed authorization requests."),null];let d=new URL(c.authorization_endpoint);if(this.pushedAuthorizationRequests){let b,e=await bx(c,this.clientMetadata,await this.getClientAuth(),a,{...this.httpOptions(),[a2]:this.fetch,[a_]:this.allowInsecureRequests});try{b=await bG(c,this.clientMetadata,e)}catch(a){return[new C.yi({cause:new C.gz({code:a.error,message:a.error_description}),message:"An error occured while pushing the authorization request."}),null]}return d.searchParams.set("request_uri",b.request_uri),d.searchParams.set("client_id",this.clientMetadata.client_id),[null,d]}return d.search=a.toString(),[null,d]}async getClientAuth(){var a;if(!this.clientSecret&&!this.clientAssertionSigningKey)throw Error("The client secret or client assertion signing key must be provided.");let b=this.clientAssertionSigningKey;return b&&"string"==typeof b&&(b=await af(b,this.clientAssertionSigningAlg)),b?function(a,b){let{key:c,kid:d}=a instanceof CryptoKey?{key:a}:a?.key instanceof CryptoKey?(void 0!==a.kid&&bi(a.kid,'"kid"'),{key:a.key,kid:a.kid}):{};var e='"clientPrivateKey.key"';if(!(c instanceof CryptoKey))throw a$(`${e} must be a CryptoKey`,aZ);if("private"!==c.type)throw a$(`${e} must be a private CryptoKey`,aY);return async(a,b,e,f)=>{let g={alg:function(a){switch(a.algorithm.name){case"RSA-PSS":switch(a.algorithm.hash.name){case"SHA-256":return"PS256";case"SHA-384":return"PS384";case"SHA-512":return"PS512";default:throw new a8("unsupported RsaHashedKeyAlgorithm hash name",{cause:a})}case"RSASSA-PKCS1-v1_5":switch(a.algorithm.hash.name){case"SHA-256":return"RS256";case"SHA-384":return"RS384";case"SHA-512":return"RS512";default:throw new a8("unsupported RsaHashedKeyAlgorithm hash name",{cause:a})}case"ECDSA":switch(a.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512";default:throw new a8("unsupported EcKeyAlgorithm namedCurve",{cause:a})}case"Ed25519":case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return a.algorithm.name;case"EdDSA":return"Ed25519";default:throw new a8("unsupported CryptoKey algorithm name",{cause:a})}}(c),kid:d},h=function(a,b){let c=bp()+bn(b);return{jti:bl(),aud:a.issuer,exp:c+60,iat:c,nbf:c,iss:b.client_id,sub:b.client_id}}(a,b);e.set("client_id",b.client_id),e.set("client_assertion_type","urn:ietf:params:oauth:client-assertion-type:jwt-bearer"),e.set("client_assertion",await bs(g,h,c))}}(b):(bi(a=this.clientSecret,'"clientSecret"'),(b,c,d,e)=>{d.set("client_id",c.client_id),d.set("client_secret",a)})}get issuer(){return this.domain.startsWith("http://")||this.domain.startsWith("https://")?this.domain:`https://${this.domain}`}async getConnectionTokenSet(a,b,c){if(!a.refreshToken&&(!b||b.expiresAt<=Date.now()/1e3))return[new C.dx(C.W$.MISSING_REFRESH_TOKEN,"A refresh token was not present, Connection Access Token requires a refresh token. The user needs to re-authenticate."),null];if(a.refreshToken&&(!b||b.expiresAt<=Date.now()/1e3)){let b,d=new URLSearchParams;d.append("connection",c.connection),d.append("subject_token_type","urn:ietf:params:oauth:token-type:refresh_token"),d.append("subject_token",a.refreshToken),d.append("requested_token_type","http://auth0.com/oauth/token-type/federated-connection-access-token"),c.login_hint&&d.append("login_hint",c.login_hint);let[e,f]=await this.discoverAuthorizationServerMetadata();if(e)return[e,null];let g=await ch(f,this.clientMetadata,await this.getClientAuth(),"urn:auth0:params:oauth:grant-type:token-exchange:federated-connection-access-token",d,{[a2]:this.fetch,[a_]:this.allowInsecureRequests});try{b=await ci(f,this.clientMetadata,g)}catch(a){return[new C.dx(C.W$.FAILED_TO_EXCHANGE,"There was an error trying to exchange the refresh token for a connection access token.",new C.gz({code:a.error,message:a.error_description})),null]}return[null,{accessToken:b.access_token,expiresAt:Math.floor(Date.now()/1e3)+Number(b.expires_in),scope:b.scope,connection:c.connection}]}return[null,b]}async finalizeSession(a,b){if(this.beforeSessionSaved)a={...await this.beforeSessionSaved(a,b??null),internal:a.internal};else{var c;a.user=Object.keys(c=a.user).reduce((a,b)=>(dw.includes(b)&&(a[b]=c[b]),a),{})}return a}}let dB=a=>{let b=new TextEncoder().encode(a),c=[];for(let a=0;a<b.length;a+=32768)c.push(String.fromCharCode.apply(null,b.subarray(a,a+32768)));return btoa(c.join(""))};class dC{constructor({secret:a,rolling:b=!0,absoluteDuration:c=259200,inactivityDuration:d=86400,store:e,cookieOptions:f}){this.secret=a,this.rolling=b,this.absoluteDuration=c,this.inactivityDuration=d,this.store=e,this.sessionCookieName=f?.name??"__session",this.cookieConfig={httpOnly:!0,sameSite:f?.sameSite??"lax",secure:f?.secure??!1,path:f?.path??"/",domain:f?.domain,transient:f?.transient}}epoch(){return Date.now()/1e3|0}calculateMaxAge(a){if(!this.rolling)return this.absoluteDuration;let b=Math.min(this.epoch()+this.inactivityDuration,a+this.absoluteDuration)-this.epoch();return b>0?b:0}}let dD="appSession";function dE(a,b){let c=b.user;return{user:c,tokenSet:{idToken:b.idToken??void 0,accessToken:b.accessToken??void 0,scope:b.accessTokenScope,refreshToken:b.refreshToken,expiresAt:b.accessTokenExpiresAt},internal:{sid:c.sid,createdAt:a.iat}}}let dF=()=>{let a=new Uint8Array(16);return crypto.getRandomValues(a),Array.from(a).map(a=>a.toString(16).padStart(2,"0")).join("")};class dG extends dC{constructor({secret:a,store:b,rolling:c,absoluteDuration:d,inactivityDuration:e,cookieOptions:f}){super({secret:a,rolling:c,absoluteDuration:d,inactivityDuration:e,cookieOptions:f}),this.store=b}async get(a){let b=a.get(this.sessionCookieName)||a.get(dD);if(!b||!b.value)return null;let c=null;try{let a=await dl(b.value,this.secret);if(null===a)return null;c=a.payload.id}catch(a){if("ERR_JWE_INVALID"===a.code){let a=await dm(b.name,b.value,this.secret);if(!a)return null;c=a}}if(!c)return null;let d=await this.store.get(c);return d?d.header?.iat?dE(d.header,d.data):d:null}async set(a,b,c,d=!1){let e=null,f=a.get(this.sessionCookieName)?.value;if(f){let a=await dl(f,this.secret);a&&(e=a.payload.id)}e&&d&&(await this.store.delete(e),e=dF()),e||(e=dF());let g=this.calculateMaxAge(c.internal.createdAt),h=Date.now()/1e3+g,i=await dk({id:e},this.secret,h);b.set(this.sessionCookieName,i.toString(),{...this.cookieConfig,maxAge:g}),await this.store.set(e,c),a.set(this.sessionCookieName,i.toString()),this.sessionCookieName!==dD&&a.has(dD)&&dv(b,dD,{domain:this.cookieConfig.domain,path:this.cookieConfig.path})}async delete(a,b){let c=a.get(this.sessionCookieName)?.value;if(dv(b,this.sessionCookieName,{domain:this.cookieConfig.domain,path:this.cookieConfig.path}),!c)return;let d=await dl(c,this.secret);d&&await this.store.delete(d.payload.id)}}class dH extends dC{constructor({secret:a,rolling:b,absoluteDuration:c,inactivityDuration:d,cookieOptions:e}){super({secret:a,rolling:b,absoluteDuration:c,inactivityDuration:d,cookieOptions:e}),this.connectionTokenSetsCookieName="__FC"}async get(a){let b=ds(this.sessionCookieName,a)??ds(dD,a,!0);if(!b)return null;let c=await dl(b,this.secret);if(!c)return null;let d=c.protectedHeader.iat?dE(c.protectedHeader,c.payload):c.payload,e=this.getConnectionTokenSetsCookies(a),f=[];for(let a of e){let b=await dl(a.value,this.secret);b&&f.push(b.payload)}return{...d,...f.length?{connectionTokenSets:f}:{}}}async set(a,b,c){let{connectionTokenSets:d,...e}=c,f=this.calculateMaxAge(c.internal.createdAt),g=Math.floor(Date.now()/1e3)+f,h=(await dk(e,this.secret,g)).toString(),i={...this.cookieConfig,maxAge:f};!function(a,b,c,d,e){let{transient:f,...g}=c,h={...g};if(f&&delete h.maxAge,new TextEncoder().encode(b).length<=3500){e.set(a,b,h),d.set(a,b),dr(d,a).forEach(a=>{dv(e,a.name,{path:h.path,domain:h.domain}),d.delete(a.name)});return}let i=0,j=0;for(;i<b.length;){let c=b.slice(i,i+3500),f=`${a}__${j}`;e.set(f,c,h),d.set(f,c),i+=3500,j++}let k=dr(d,a).length-j;if(k>0)for(let b=0;b<k;b++){let c=j+b,f=`${a}__${c}`;dv(e,f,{path:h.path,domain:h.domain}),d.delete(f)}dv(e,a,{path:h.path,domain:h.domain}),d.delete(a)}(this.sessionCookieName,h,i,a,b),d?.length&&await Promise.all(d.map((c,d)=>this.storeInCookie(a,b,c,`${this.connectionTokenSetsCookieName}_${d}`,f))),dt(dD,a,b,!0,{domain:this.cookieConfig.domain,path:this.cookieConfig.path})}async delete(a,b){let c={domain:this.cookieConfig.domain,path:this.cookieConfig.path};dt(this.sessionCookieName,a,b,!1,c),this.getConnectionTokenSetsCookies(a).forEach(a=>dv(b,a.name,c))}async storeInCookie(a,b,c,d,e){let f=Math.floor(Date.now()/1e3+e),g=await dk(c,this.secret,f),h=g.toString();b.set(d,g.toString(),{...this.cookieConfig,maxAge:e}),a.set(d,h);let i=new cB(new Headers);i.set(d,h,{...this.cookieConfig,maxAge:e}),new TextEncoder().encode(i.toString()).length>=4096&&(d===this.sessionCookieName?console.warn(`The ${d} cookie size exceeds 4096 bytes, which may cause issues in some browsers. Consider removing any unnecessary custom claims from the access token or the user profile. Alternatively, you can use a stateful session implementation to store the session data in a data store.`):console.warn(`The ${d} cookie size exceeds 4096 bytes, which may cause issues in some browsers. You can use a stateful session implementation to store the session data in a data store.`))}getConnectionTokenSetsCookies(a){return a.getAll().filter(a=>a.name.startsWith(this.connectionTokenSetsCookieName))}}class dI{constructor({secret:a,cookieOptions:b,enableParallelTransactions:c}){this.secret=a,this.transactionCookiePrefix=b?.prefix??"__txn_",this.cookieOptions={httpOnly:!0,sameSite:b?.sameSite??"lax",secure:b?.secure??!1,path:b?.path??"/",domain:b?.domain,maxAge:b?.maxAge||3600},this.enableParallelTransactions=c??!0}getTransactionCookieName(a){return this.enableParallelTransactions?`${this.transactionCookiePrefix}${a}`:`${this.transactionCookiePrefix}`}getCookiePrefix(){return this.transactionCookiePrefix}async save(a,b,c){if(!b.state)throw Error("Transaction state is required");if(c&&!this.enableParallelTransactions){let a=this.getTransactionCookieName(b.state);if(c.get(a))return void console.warn("A transaction is already in progress. Only one transaction is allowed when parallel transactions are disabled.")}let d=this.cookieOptions.maxAge,e=Math.floor(Date.now()/1e3+d),f=await dk(b,this.secret,e);a.set(this.getTransactionCookieName(b.state),f.toString(),this.cookieOptions)}async get(a,b){let c=this.getTransactionCookieName(b),d=a.get(c)?.value;return d?dl(d,this.secret):null}async delete(a,b){dv(a,this.getTransactionCookieName(b),{domain:this.cookieOptions.domain,path:this.cookieOptions.path})}async deleteAll(a,b){let c=this.getCookiePrefix(),d={domain:this.cookieOptions.domain,path:this.cookieOptions.path};a.getAll().forEach(a=>{a.name.startsWith(c)&&dv(b,a.name,d)})}}class dJ{constructor(a={}){let{domain:b,clientId:c,clientSecret:d,appBaseUrl:e,secret:f,clientAssertionSigningKey:g}=this.validateAndExtractRequiredOptions(a),h=a.clientAssertionSigningAlg||process.env.AUTH0_CLIENT_ASSERTION_SIGNING_ALG,i=process.env.NEXT_PUBLIC_BASE_PATH,j={name:a.session?.cookie?.name??"__session",secure:a.session?.cookie?.secure??"true"===process.env.AUTH0_COOKIE_SECURE,sameSite:a.session?.cookie?.sameSite??process.env.AUTH0_COOKIE_SAME_SITE??"lax",path:a.session?.cookie?.path??process.env.AUTH0_COOKIE_PATH??i??"/",transient:a.session?.cookie?.transient??"true"===process.env.AUTH0_COOKIE_TRANSIENT,domain:a.session?.cookie?.domain??process.env.AUTH0_COOKIE_DOMAIN},k={prefix:a.transactionCookie?.prefix??"__txn_",secure:a.transactionCookie?.secure??!1,sameSite:a.transactionCookie?.sameSite??"lax",path:a.transactionCookie?.path??i??"/",maxAge:a.transactionCookie?.maxAge??3600};if(e){let{protocol:a}=new URL(e);"https:"===a&&(j.secure=!0,k.secure=!0)}this.routes={login:process.env.NEXT_PUBLIC_LOGIN_ROUTE||"/auth/login",logout:"/auth/logout",callback:"/auth/callback",backChannelLogout:"/auth/backchannel-logout",profile:process.env.NEXT_PUBLIC_PROFILE_ROUTE||"/auth/profile",accessToken:process.env.NEXT_PUBLIC_ACCESS_TOKEN_ROUTE||"/auth/access-token",...a.routes},this.transactionStore=new dI({secret:f,cookieOptions:k,enableParallelTransactions:a.enableParallelTransactions??!0}),this.sessionStore=a.sessionStore?new dG({...a.session,secret:f,store:a.sessionStore,cookieOptions:j}):new dH({...a.session,secret:f,cookieOptions:j}),this.authClient=new dA({transactionStore:this.transactionStore,sessionStore:this.sessionStore,domain:b,clientId:c,clientSecret:d,clientAssertionSigningKey:g,clientAssertionSigningAlg:h,authorizationParameters:a.authorizationParameters,pushedAuthorizationRequests:a.pushedAuthorizationRequests,appBaseUrl:e,secret:f,signInReturnToPath:a.signInReturnToPath,logoutStrategy:a.logoutStrategy,beforeSessionSaved:a.beforeSessionSaved,onCallback:a.onCallback,routes:this.routes,allowInsecureRequests:a.allowInsecureRequests,httpTimeout:a.httpTimeout,enableTelemetry:a.enableTelemetry,enableAccessTokenEndpoint:a.enableAccessTokenEndpoint,noContentProfileResponseWhenUnauthenticated:a.noContentProfileResponseWhenUnauthenticated})}middleware(a){return this.authClient.handler.bind(this.authClient)(a)}async getSession(a){return a?a instanceof B.NextRequest?this.sessionStore.get(a.cookies):this.sessionStore.get(this.createRequestCookies(a)):this.sessionStore.get(await (0,A.U)())}async getAccessToken(a,b,c){let d,e,f={refresh:!1},g={};if(a&&(a instanceof Request||"object"==typeof a.headers)){if(d=a,e=b,g={...f,...c??{}},!e)throw TypeError("getAccessToken(req, res): The 'res' argument is missing. Both 'req' and 'res' must be provided together for Pages Router or middleware usage.")}else{if(void 0!==b||void 0!==c)throw TypeError("getAccessToken: Invalid arguments. Valid signatures are getAccessToken(), getAccessToken(options), or getAccessToken(req, res, options).");g={...f,...a??{}}}let h=d?await this.getSession(d):await this.getSession();if(!h)throw new C.oc(C.Pi.MISSING_SESSION,"The user does not have an active session.");let[i,j]=await this.authClient.getTokenSet(h.tokenSet,g.refresh);if(i)throw i;let{tokenSet:k,idTokenClaims:l}=j;if(k.accessToken!==h.tokenSet.accessToken||k.expiresAt!==h.tokenSet.expiresAt||k.refreshToken!==h.tokenSet.refreshToken){l&&(h.user=l);let a=await this.authClient.finalizeSession(h,k.idToken);await this.saveToSession({...a,tokenSet:k},d,e)}return{token:k.accessToken,scope:k.scope,expiresAt:k.expiresAt}}async getAccessTokenForConnection(a,b,c){let d=b?await this.getSession(b):await this.getSession();if(!d)throw new C.dx(C.W$.MISSING_SESSION,"The user does not have an active session.");let e=d.connectionTokenSets?.find(b=>b.connection===a.connection),[f,g]=await this.authClient.getConnectionTokenSet(d.tokenSet,e,a);if(null!==f)throw f;if(g&&(!e||g.accessToken!==e.accessToken||g.expiresAt!==e.expiresAt||g.scope!==e.scope)){let f;f=e?d.connectionTokenSets?.map(b=>b.connection===a.connection?g:b):[...d.connectionTokenSets||[],g],await this.saveToSession({...d,connectionTokenSets:f},b,c)}return{token:g.accessToken,scope:g.scope,expiresAt:g.expiresAt}}async updateSession(a,b,c){if(b){if(!c)throw Error("The session data is missing.");if(a instanceof B.NextRequest&&b instanceof B.NextResponse){let d=await this.getSession(a);if(!d)throw Error("The user is not authenticated.");await this.sessionStore.set(a.cookies,b.cookies,{...c,internal:{...d.internal}})}else{let d=await this.getSession(a);if(!d)throw Error("The user is not authenticated.");let e=new Headers,f=new cB(e),g=this.createRequestCookies(a);for(let[a,h]of(await this.sessionStore.set(g,f,{...c,internal:{...d.internal}}),e.entries()))b.setHeader(a,h)}}else{let b=await this.getSession();if(!b)throw Error("The user is not authenticated.");if(!a)throw Error("The session data is missing.");await this.sessionStore.set(await (0,A.U)(),await (0,A.U)(),{...a,internal:{...b.internal}})}}createRequestCookies(a){let b=new Headers;for(let c in a.headers)if(Array.isArray(a.headers[c]))for(let d of a.headers[c])b.append(c,d);else b.append(c,a.headers[c]??"");return new cA(b)}async startInteractiveLogin(a){return this.authClient.startInteractiveLogin(a)}withPageAuthRequired(a,b){let d,e,f={loginUrl:this.routes.login},g=(d=this,(a,b={})=>async e=>{let g=await d.getSession();if(!g?.user){let a="function"==typeof b.returnTo?await b.returnTo(e):b.returnTo,{redirect:d}=await c.e(161).then(c.bind(c,2161));d(`${f.loginUrl}${b.returnTo?`?returnTo=${a}`:""}`)}return a(e)}),h=(e=this,({getServerSideProps:a,returnTo:b}={})=>async c=>{let d=await e.getSession(c.req);if(!d?.user)return{redirect:{destination:`${f.loginUrl}?returnTo=${encodeURIComponent(b||c.resolvedUrl)}`,permanent:!1}};let g={props:{}};if(a&&(g=await a(c)),g.props instanceof Promise){let a=await g.props;return{...g,props:{user:d.user,...a}}}return{...g,props:{user:d.user,...g.props}}});return"function"==typeof a?g(a,b):h(a)}withApiAuthRequired(a){let b,c,d=(b=this,a=>async(c,d)=>{let e=await b.getSession(c);if(!e||!e.user)return void d.status(401).json({error:"not_authenticated",description:"The user does not have an active session or is not authenticated"});await a(c,d)}),e=(c=this,a=>async(b,d)=>{let e=await c.getSession();if(!e||!e.user)return B.NextResponse.json({error:"not_authenticated",description:"The user does not have an active session or is not authenticated"},{status:401});let f=await a(b,d);return f instanceof B.NextResponse?f:new B.NextResponse(f.body,f)});return(b,c)=>b instanceof Request||b.headers instanceof Headers||"boolean"==typeof b.bodyUsed?e(a)(b,c):d(a)(b,c)}async saveToSession(a,b,c){if(b&&c)if(b instanceof B.NextRequest&&c instanceof B.NextResponse)await this.sessionStore.set(b.cookies,c.cookies,a);else{let d=new Headers,e=new cB(d);for(let[f,g]of(await this.sessionStore.set(this.createRequestCookies(b),e,a),d.entries()))c.setHeader(f,g)}else try{await this.sessionStore.set(await (0,A.U)(),await (0,A.U)(),a)}catch(a){}}validateAndExtractRequiredOptions(a){let b={domain:a.domain??process.env.AUTH0_DOMAIN,clientId:a.clientId??process.env.AUTH0_CLIENT_ID,appBaseUrl:a.appBaseUrl??process.env.APP_BASE_URL,secret:a.secret??process.env.AUTH0_SECRET},c=a.clientSecret??process.env.AUTH0_CLIENT_SECRET,d=a.clientAssertionSigningKey??process.env.AUTH0_CLIENT_ASSERTION_SIGNING_KEY,e=Object.entries(b).filter(([,a])=>!a).map(([a])=>a);if(c||d||e.push("clientAuthentication"),e.length){let a={domain:"AUTH0_DOMAIN",clientId:"AUTH0_CLIENT_ID",appBaseUrl:"APP_BASE_URL",secret:"AUTH0_SECRET"},b="WARNING: Not all required options were provided when creating an instance of Auth0Client. Ensure to provide all missing options, either by passing it to the Auth0Client constructor, or by setting the corresponding environment variable.\n";e.forEach(c=>{"clientAuthentication"===c?b+=`Missing: clientAuthentication: Set either AUTH0_CLIENT_SECRET env var or AUTH0_CLIENT_ASSERTION_SIGNING_KEY env var, or pass clientSecret or clientAssertionSigningKey in options
`:a[c]?b+=`Missing: ${c}: Set ${a[c]} env var or pass ${c} in options
`:b+=`Missing: ${c}
`}),console.error(b.trim())}return{...b,clientSecret:c,clientAssertionSigningKey:d}}}let dK=new dJ;function dL(a){return dK.middleware(a)}function dM(a){return dK.middleware(a)}let dN=new k.AppRouteRouteModule({definition:{kind:l.RouteKind.APP_ROUTE,page:"/api/auth/[...auth0]/route",pathname:"/api/auth/[...auth0]",filename:"route",bundlePath:"app/api/auth/[...auth0]/route"},distDir:".next",relativeProjectDir:"",resolvedPagePath:"C:\\dev\\HTN2025-placeholder\\app\\api\\auth\\[...auth0]\\route.ts",nextConfigOutput:"",userland:j}),{workAsyncStorage:dO,workUnitAsyncStorage:dP,serverHooks:dQ}=dN;function dR(){return(0,m.patchFetch)({workAsyncStorage:dO,workUnitAsyncStorage:dP})}async function dS(a,b,c){var d;let e="/api/auth/[...auth0]/route";"/index"===e&&(e="/");let f=await dN.prepare(a,b,{srcPage:e,multiZoneDraftMode:!1});if(!f)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:g,params:h,nextConfig:i,isDraftMode:j,prerenderManifest:k,routerServerContext:m,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,resolvedPathname:C}=f,D=(0,p.normalizeAppPath)(e),E=!!(k.dynamicRoutes[D]||k.routes[C]);if(E&&!j){let a=!!k.routes[C],b=k.dynamicRoutes[D];if(b&&!1===b.fallback&&!a)throw new y.NoFallbackError}let F=null;!E||dN.isDev||j||(F="/index"===(F=C)?"/":F);let G=!0===dN.isDev||!E,H=E&&!G,I=a.method||"GET",J=(0,o.getTracer)(),K=J.getActiveScopeSpan(),L={params:h,prerenderManifest:k,renderOpts:{experimental:{cacheComponents:!!i.experimental.cacheComponents,authInterrupts:!!i.experimental.authInterrupts},supportsDynamicResponse:G,incrementalCache:(0,n.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=i.experimental)?void 0:d.cacheLife,isRevalidate:H,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>dN.onRequestError(a,b,d,m)},sharedContext:{buildId:g}},M=new q.NodeNextRequest(a),N=new q.NodeNextResponse(b),O=r.NextRequestAdapter.fromNodeNextRequest(M,(0,r.signalFromNodeResponse)(b));try{let d=async c=>dN.handle(O,L).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=J.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==s.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${I} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${I} ${a.url}`)}),f=async f=>{var g,h;let o=async({previousCacheEntry:g})=>{try{if(!(0,n.getRequestMeta)(a,"minimalMode")&&A&&B&&!g)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(f);a.fetchMetrics=L.renderOpts.fetchMetrics;let h=L.renderOpts.pendingWaitUntil;h&&c.waitUntil&&(c.waitUntil(h),h=void 0);let i=L.renderOpts.collectedTags;if(!E)return await (0,u.I)(M,N,e,L.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,v.toNodeOutgoingHttpHeaders)(e.headers);i&&(b[x.NEXT_CACHE_TAGS_HEADER]=i),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=x.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,d=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=x.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:z.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==g?void 0:g.isStale)&&await dN.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,t.c)({isRevalidate:H,isOnDemandRevalidate:A})},m),b}},p=await dN.handleResponse({req:a,nextConfig:i,cacheKey:F,routeKind:l.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:k,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,responseGenerator:o,waitUntil:c.waitUntil});if(!E)return null;if((null==p||null==(g=p.value)?void 0:g.kind)!==z.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(h=p.value)?void 0:h.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,n.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",A?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),j&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let q=(0,v.fromNodeOutgoingHttpHeaders)(p.value.headers);return(0,n.getRequestMeta)(a,"minimalMode")&&E||q.delete(x.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||b.getHeader("Cache-Control")||q.get("Cache-Control")||q.set("Cache-Control",(0,w.getCacheControlHeader)(p.cacheControl)),await (0,u.I)(M,N,new Response(p.value.body,{headers:q,status:p.value.status||200})),null};K?await f(K):await J.withPropagatedContext(a.headers,()=>J.trace(s.BaseServerSpan.handleRequest,{spanName:`${I} ${a.url}`,kind:o.SpanKind.SERVER,attributes:{"http.method":I,"http.target":a.url}},f))}catch(b){if(K||b instanceof y.NoFallbackError||await dN.onRequestError(a,b,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,t.c)({isRevalidate:H,isOnDemandRevalidate:A})}),E)throw b;return await (0,u.I)(M,N,new Response(null,{status:500})),null}}},5174:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ImageResponse:function(){return d.ImageResponse},NextRequest:function(){return e.NextRequest},NextResponse:function(){return f.NextResponse},URLPattern:function(){return h.URLPattern},after:function(){return i.after},connection:function(){return j.connection},unstable_rootParams:function(){return k.unstable_rootParams},userAgent:function(){return g.userAgent},userAgentFromString:function(){return g.userAgentFromString}});let d=c(8197),e=c(7129),f=c(1589),g=c(6005),h=c(5622),i=c(7522),j=c(5281),k=c(7324)},5281:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"connection",{enumerable:!0,get:function(){return j}});let d=c(9294),e=c(3033),f=c(6906),g=c(1938),h=c(2831),i=c(1716);function j(){let a=d.workAsyncStorage.getStore(),b=e.workUnitAsyncStorage.getStore();if(a){if(b&&"after"===b.phase&&!(0,i.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${a.route} used "connection" inside "after(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but "after(...)" executes after the request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E186",enumerable:!1,configurable:!0});if(a.forceStatic)return Promise.resolve(void 0);if(a.dynamicShouldError)throw Object.defineProperty(new g.StaticGenBailoutError(`Route ${a.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`connection\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E562",enumerable:!1,configurable:!0});if(b)switch(b.type){case"cache":{let b=Object.defineProperty(Error(`Route ${a.route} used "connection" inside "use cache". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual request, but caches must be able to be produced before a request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E752",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"private-cache":{let b=Object.defineProperty(Error(`Route ${a.route} used "connection" inside "use cache: private". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual navigation request, but caches must be able to be produced before a navigation request, so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E753",enumerable:!1,configurable:!0});throw Error.captureStackTrace(b,j),a.invalidDynamicUsageError??=b,b}case"unstable-cache":throw Object.defineProperty(Error(`Route ${a.route} used "connection" inside a function cached with "unstable_cache(...)". The \`connection()\` function is used to indicate the subsequent code must only run when there is an actual Request, but caches must be able to be produced before a Request so this function is not allowed in this scope. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E1",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-runtime":return(0,h.makeHangingPromise)(b.renderSignal,a.route,"`connection()`");case"prerender-ppr":return(0,f.postponeWithTracking)(a.route,"connection",b.dynamicTracking);case"prerender-legacy":return(0,f.throwToInterruptStaticGeneration)("connection",a,b);case"request":return(0,f.trackDynamicDataInDynamicRender)(b),Promise.resolve(void 0)}}(0,e.throwForMissingRequestStore)("connection")}},5622:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"URLPattern",{enumerable:!0,get:function(){return c}});let c="undefined"==typeof URLPattern?void 0:URLPattern},5736:(a,b,c)=>{"use strict";a.exports=c(4870)},6005:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{isBot:function(){return e},userAgent:function(){return g},userAgentFromString:function(){return f}});let d=function(a){return a&&a.__esModule?a:{default:a}}(c(6404));function e(a){return/Googlebot|Mediapartners-Google|AdsBot-Google|googleweblight|Storebot-Google|Google-PageRenderer|Google-InspectionTool|Bingbot|BingPreview|Slurp|DuckDuckBot|baiduspider|yandex|sogou|LinkedInBot|bitlybot|tumblr|vkShare|quora link preview|facebookexternalhit|facebookcatalog|Twitterbot|applebot|redditbot|Slackbot|Discordbot|WhatsApp|SkypeUriPreview|ia_archiver/i.test(a)}function f(a){return{...(0,d.default)(a),isBot:void 0!==a&&e(a)}}function g({headers:a}){return f(a.get("user-agent")||void 0)}},6404:(a,b,c)=>{var d;(()=>{var e={226:function(e,f){!function(g,h){"use strict";var i="function",j="undefined",k="object",l="string",m="major",n="model",o="name",p="type",q="vendor",r="version",s="architecture",t="console",u="mobile",v="tablet",w="smarttv",x="wearable",y="embedded",z="Amazon",A="Apple",B="ASUS",C="BlackBerry",D="Browser",E="Chrome",F="Firefox",G="Google",H="Huawei",I="Microsoft",J="Motorola",K="Opera",L="Samsung",M="Sharp",N="Sony",O="Xiaomi",P="Zebra",Q="Facebook",R="Chromium OS",S="Mac OS",T=function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},U=function(a){for(var b={},c=0;c<a.length;c++)b[a[c].toUpperCase()]=a[c];return b},V=function(a,b){return typeof a===l&&-1!==W(b).indexOf(W(a))},W=function(a){return a.toLowerCase()},X=function(a,b){if(typeof a===l)return a=a.replace(/^\s\s*/,""),typeof b===j?a:a.substring(0,350)},Y=function(a,b){for(var c,d,e,f,g,j,l=0;l<b.length&&!g;){var m=b[l],n=b[l+1];for(c=d=0;c<m.length&&!g&&m[c];)if(g=m[c++].exec(a))for(e=0;e<n.length;e++)j=g[++d],typeof(f=n[e])===k&&f.length>0?2===f.length?typeof f[1]==i?this[f[0]]=f[1].call(this,j):this[f[0]]=f[1]:3===f.length?typeof f[1]!==i||f[1].exec&&f[1].test?this[f[0]]=j?j.replace(f[1],f[2]):void 0:this[f[0]]=j?f[1].call(this,j,f[2]):void 0:4===f.length&&(this[f[0]]=j?f[3].call(this,j.replace(f[1],f[2])):h):this[f]=j||h;l+=2}},Z=function(a,b){for(var c in b)if(typeof b[c]===k&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(V(b[c][d],a))return"?"===c?h:c}else if(V(b[c],a))return"?"===c?h:c;return a},$={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},_={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[r,[o,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[r,[o,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[o,r],[/opios[\/ ]+([\w\.]+)/i],[r,[o,K+" Mini"]],[/\bopr\/([\w\.]+)/i],[r,[o,K]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[o,r],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[r,[o,"UC"+D]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[r,[o,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[r,[o,"WeChat"]],[/konqueror\/([\w\.]+)/i],[r,[o,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[r,[o,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[r,[o,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[o,/(.+)/,"$1 Secure "+D],r],[/\bfocus\/([\w\.]+)/i],[r,[o,F+" Focus"]],[/\bopt\/([\w\.]+)/i],[r,[o,K+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[r,[o,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[r,[o,"Dolphin"]],[/coast\/([\w\.]+)/i],[r,[o,K+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[r,[o,"MIUI "+D]],[/fxios\/([-\w\.]+)/i],[r,[o,F]],[/\bqihu|(qi?ho?o?|360)browser/i],[[o,"360 "+D]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[o,/(.+)/,"$1 "+D],r],[/(comodo_dragon)\/([\w\.]+)/i],[[o,/_/g," "],r],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[o,r],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[o],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[o,Q],r],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[o,r],[/\bgsa\/([\w\.]+) .*safari\//i],[r,[o,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[r,[o,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[r,[o,E+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[o,E+" WebView"],r],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[r,[o,"Android "+D]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[o,r],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[r,[o,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[r,o],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[o,[r,Z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[o,r],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[o,"Netscape"],r],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[r,[o,F+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[o,r],[/(cobalt)\/([\w\.]+)/i],[o,[r,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[s,"amd64"]],[/(ia32(?=;))/i],[[s,W]],[/((?:i[346]|x)86)[;\)]/i],[[s,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[s,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[s,"armhf"]],[/windows (ce|mobile); ppc;/i],[[s,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[s,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[s,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[s,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[n,[q,L],[p,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[n,[q,L],[p,u]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[n,[q,A],[p,u]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[n,[q,A],[p,v]],[/(macintosh);/i],[n,[q,A]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[n,[q,M],[p,u]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[n,[q,H],[p,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[n,[q,H],[p,u]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[n,/_/g," "],[q,O],[p,u]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[n,/_/g," "],[q,O],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[n,[q,"OPPO"],[p,u]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[n,[q,"Vivo"],[p,u]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[n,[q,"Realme"],[p,u]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[n,[q,J],[p,u]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[n,[q,J],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[n,[q,"LG"],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[n,[q,"LG"],[p,u]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[n,[q,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[n,/_/g," "],[q,"Nokia"],[p,u]],[/(pixel c)\b/i],[n,[q,G],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[n,[q,G],[p,u]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[n,[q,N],[p,u]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[n,"Xperia Tablet"],[q,N],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[n,[q,"OnePlus"],[p,u]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[n,[q,z],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[n,/(.+)/g,"Fire Phone $1"],[q,z],[p,u]],[/(playbook);[-\w\),; ]+(rim)/i],[n,q,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[n,[q,C],[p,u]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[n,[q,B],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[n,[q,B],[p,u]],[/(nexus 9)/i],[n,[q,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[q,[n,/_/g," "],[p,u]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[n,[q,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[n,[q,"Meizu"],[p,u]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[q,n,[p,u]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[q,n,[p,v]],[/(surface duo)/i],[n,[q,I],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[n,[q,"Fairphone"],[p,u]],[/(u304aa)/i],[n,[q,"AT&T"],[p,u]],[/\bsie-(\w*)/i],[n,[q,"Siemens"],[p,u]],[/\b(rct\w+) b/i],[n,[q,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[n,[q,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[n,[q,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[n,[q,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[n,[q,"NuVision"],[p,v]],[/\b(k88) b/i],[n,[q,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[n,[q,"ZTE"],[p,u]],[/\b(gen\d{3}) b.+49h/i],[n,[q,"Swiss"],[p,u]],[/\b(zur\d{3}) b/i],[n,[q,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[n,[q,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[q,"Dragon Touch"],n,[p,v]],[/\b(ns-?\w{0,9}) b/i],[n,[q,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[n,[q,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[q,"Voice"],n,[p,u]],[/\b(lvtel\-)?(v1[12]) b/i],[[q,"LvTel"],n,[p,u]],[/\b(ph-1) /i],[n,[q,"Essential"],[p,u]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[n,[q,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[n,[q,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[n,[q,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[n,[q,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[q,n,[p,u]],[/(kin\.[onetw]{3})/i],[[n,/\./g," "],[q,I],[p,u]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[n,[q,P],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[n,[q,P],[p,u]],[/smart-tv.+(samsung)/i],[q,[p,w]],[/hbbtv.+maple;(\d+)/i],[[n,/^/,"SmartTV"],[q,L],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[q,"LG"],[p,w]],[/(apple) ?tv/i],[q,[n,A+" TV"],[p,w]],[/crkey/i],[[n,E+"cast"],[q,G],[p,w]],[/droid.+aft(\w)( bui|\))/i],[n,[q,z],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[n,[q,M],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[n,[q,N],[p,w]],[/(mitv-\w{5}) bui/i],[n,[q,O],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[q,n,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[q,X],[n,X],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[q,n,[p,t]],[/droid.+; (shield) bui/i],[n,[q,"Nvidia"],[p,t]],[/(playstation [345portablevi]+)/i],[n,[q,N],[p,t]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[n,[q,I],[p,t]],[/((pebble))app/i],[q,n,[p,x]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[n,[q,A],[p,x]],[/droid.+; (glass) \d/i],[n,[q,G],[p,x]],[/droid.+; (wt63?0{2,3})\)/i],[n,[q,P],[p,x]],[/(quest( 2| pro)?)/i],[n,[q,Q],[p,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[q,[p,y]],[/(aeobc)\b/i],[n,[q,z],[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[n,[p,u]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[n,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,u]],[/(android[-\w\. ]{0,9});.+buil/i],[n,[q,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[r,[o,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[r,[o,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[o,r],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[r,o]],os:[[/microsoft (windows) (vista|xp)/i],[o,r],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[o,[r,Z,$]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[o,"Windows"],[r,Z,$]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[r,/_/g,"."],[o,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[o,S],[r,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[r,o],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[o,r],[/\(bb(10);/i],[r,[o,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[r,[o,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[r,[o,F+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[r,[o,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[r,[o,"watchOS"]],[/crkey\/([\d\.]+)/i],[r,[o,E+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[o,R],r],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[o,r],[/(sunos) ?([\w\.\d]*)/i],[[o,"Solaris"],r],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[o,r]]},aa=function(a,b){if(typeof a===k&&(b=a,a=h),!(this instanceof aa))return new aa(a,b).getResult();var c=typeof g!==j&&g.navigator?g.navigator:h,d=a||(c&&c.userAgent?c.userAgent:""),e=c&&c.userAgentData?c.userAgentData:h,f=b?T(_,b):_,t=c&&c.userAgent==d;return this.getBrowser=function(){var a,b={};return b[o]=h,b[r]=h,Y.call(b,d,f.browser),b[m]=typeof(a=b[r])===l?a.replace(/[^\d\.]/g,"").split(".")[0]:h,t&&c&&c.brave&&typeof c.brave.isBrave==i&&(b[o]="Brave"),b},this.getCPU=function(){var a={};return a[s]=h,Y.call(a,d,f.cpu),a},this.getDevice=function(){var a={};return a[q]=h,a[n]=h,a[p]=h,Y.call(a,d,f.device),t&&!a[p]&&e&&e.mobile&&(a[p]=u),t&&"Macintosh"==a[n]&&c&&typeof c.standalone!==j&&c.maxTouchPoints&&c.maxTouchPoints>2&&(a[n]="iPad",a[p]=v),a},this.getEngine=function(){var a={};return a[o]=h,a[r]=h,Y.call(a,d,f.engine),a},this.getOS=function(){var a={};return a[o]=h,a[r]=h,Y.call(a,d,f.os),t&&!a[o]&&e&&"Unknown"!=e.platform&&(a[o]=e.platform.replace(/chrome os/i,R).replace(/macos/i,S)),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(a){return d=typeof a===l&&a.length>350?X(a,350):a,this},this.setUA(d),this};aa.VERSION="1.0.35",aa.BROWSER=U([o,r,m]),aa.CPU=U([s]),aa.DEVICE=U([n,q,p,t,u,w,v,x,y]),aa.ENGINE=aa.OS=U([o,r]),typeof f!==j?(e.exports&&(f=e.exports=aa),f.UAParser=aa):c.amdO?void 0===(d=(function(){return aa}).call(b,c,b,a))||(a.exports=d):typeof g!==j&&(g.UAParser=aa);var ab=typeof g!==j&&(g.jQuery||g.Zepto);if(ab&&!ab.ua){var ac=new aa;ab.ua=ac.getResult(),ab.ua.get=function(){return ac.getUA()},ab.ua.set=function(a){ac.setUA(a);var b=ac.getResult();for(var c in b)ab.ua[c]=b[c]}}}("object"==typeof window?window:this)}},f={};function g(a){var b=f[a];if(void 0!==b)return b.exports;var c=f[a]={exports:{}},d=!0;try{e[a].call(c.exports,c,c.exports,g),d=!1}finally{d&&delete f[a]}return c.exports}g.ab=__dirname+"/",a.exports=g(226)})()},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6487:()=>{},7324:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getRootParam:function(){return n},unstable_rootParams:function(){return m}});let d=c(9290),e=c(6906),f=c(9294),g=c(3033),h=c(2831),i=c(4226),j=c(9121),k=c(310),l=new WeakMap;async function m(){(0,k.warnOnce)("`unstable_rootParams()` is deprecated and will be removed in an upcoming major release. Import specific root params from `next/root-params` instead.");let a=f.workAsyncStorage.getStore();if(!a)throw Object.defineProperty(new d.InvariantError("Missing workStore in unstable_rootParams"),"__NEXT_ERROR_CODE",{value:"E615",enumerable:!1,configurable:!0});let b=g.workUnitAsyncStorage.getStore();if(!b)throw Object.defineProperty(Error(`Route ${a.route} used \`unstable_rootParams()\` in Pages Router. This API is only available within App Router.`),"__NEXT_ERROR_CODE",{value:"E641",enumerable:!1,configurable:!0});switch(b.type){case"cache":case"unstable-cache":throw Object.defineProperty(Error(`Route ${a.route} used \`unstable_rootParams()\` inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E642",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return function(a,b,c){switch(c.type){case"prerender-client":{let a="`unstable_rootParams`";throw Object.defineProperty(new d.InvariantError(`${a} must not be used within a client component. Next.js should be preventing ${a} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0})}case"prerender":{let d=c.fallbackRouteParams;if(d){for(let e in a)if(d.has(e)){let d=l.get(a);if(d)return d;let e=(0,h.makeHangingPromise)(c.renderSignal,b.route,"`unstable_rootParams`");return l.set(a,e),e}}break}case"prerender-ppr":{let d=c.fallbackRouteParams;if(d){for(let f in a)if(d.has(f))return function(a,b,c,d){let f=l.get(a);if(f)return f;let g={...a},h=Promise.resolve(g);return l.set(a,h),Object.keys(a).forEach(f=>{i.wellKnownProperties.has(f)||(b.has(f)?Object.defineProperty(g,f,{get(){let a=(0,i.describeStringPropertyAccess)("unstable_rootParams",f);"prerender-ppr"===d.type?(0,e.postponeWithTracking)(c.route,a,d.dynamicTracking):(0,e.throwToInterruptStaticGeneration)(a,c,d)},enumerable:!0}):h[f]=a[f])}),h}(a,d,b,c)}}}return Promise.resolve(a)}(b.rootParams,a,b);case"private-cache":case"prerender-runtime":case"request":return Promise.resolve(b.rootParams);default:return b}}function n(a){let b=`\`import('next/root-params').${a}()\``,c=f.workAsyncStorage.getStore();if(!c)throw Object.defineProperty(new d.InvariantError(`Missing workStore in ${b}`),"__NEXT_ERROR_CODE",{value:"E764",enumerable:!1,configurable:!0});let e=g.workUnitAsyncStorage.getStore();if(!e)throw Object.defineProperty(Error(`Route ${c.route} used ${b} outside of a Server Component. This is not allowed.`),"__NEXT_ERROR_CODE",{value:"E774",enumerable:!1,configurable:!0});let i=j.actionAsyncStorage.getStore();if(i){if(i.isAppRoute)throw Object.defineProperty(Error(`Route ${c.route} used ${b} inside a Route Handler. Support for this API in Route Handlers is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E765",enumerable:!1,configurable:!0});if(i.isAction&&"action"===e.phase)throw Object.defineProperty(Error(`${b} was used inside a Server Action. This is not supported. Functions from 'next/root-params' can only be called in the context of a route.`),"__NEXT_ERROR_CODE",{value:"E766",enumerable:!1,configurable:!0})}switch(e.type){case"unstable-cache":case"cache":throw Object.defineProperty(Error(`Route ${c.route} used ${b} inside \`"use cache"\` or \`unstable_cache\`. Support for this API inside cache scopes is planned for a future version of Next.js.`),"__NEXT_ERROR_CODE",{value:"E760",enumerable:!1,configurable:!0});case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":var k=a,l=c,m=e,n=b;if("prerender-client"===m.type)throw Object.defineProperty(new d.InvariantError(`${n} must not be used within a client component. Next.js should be preventing ${n} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});let p=m.rootParams;switch(m.type){case"prerender":if(m.fallbackRouteParams&&m.fallbackRouteParams.has(k))return(0,h.makeHangingPromise)(m.renderSignal,l.route,n);break;case"prerender-ppr":if(m.fallbackRouteParams&&m.fallbackRouteParams.has(k))return o(k,l,m,n)}return Promise.resolve(p[k])}return Promise.resolve(e.rootParams[a])}async function o(a,b,c,d){let f=(0,i.describeStringPropertyAccess)(d,a);switch(c.type){case"prerender-ppr":return(0,e.postponeWithTracking)(b.route,f,c.dynamicTracking);case"prerender-legacy":return(0,e.throwToInterruptStaticGeneration)(f,b,c)}}},7522:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),function(a,b){Object.keys(a).forEach(function(c){"default"===c||Object.prototype.hasOwnProperty.call(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:function(){return a[c]}})})}(c(2588),b)},8197:(a,b)=>{"use strict";function c(){throw Object.defineProperty(Error('ImageResponse moved from "next/server" to "next/og" since Next.js 14, please import from "next/og" instead'),"__NEXT_ERROR_CODE",{value:"E183",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"ImageResponse",{enumerable:!0,get:function(){return c}})},8335:()=>{},8706:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{MutableRequestCookiesAdapter:function(){return l},ReadonlyRequestCookiesError:function(){return g},RequestCookiesAdapter:function(){return h},appendMutableCookies:function(){return k},areCookiesMutableInCurrentPhase:function(){return n},createCookiesWithMutableAccessCheck:function(){return m},getModifiedCookieValues:function(){return j},responseCookiesToRequestCookies:function(){return p}});let d=c(3675),e=c(3036),f=c(9294);class g extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new g}}class h{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return g.callable;default:return e.ReflectAdapter.get(a,b,c)}}})}}let i=Symbol.for("next.mutated.cookies");function j(a){let b=a[i];return b&&Array.isArray(b)&&0!==b.length?b:[]}function k(a,b){let c=j(b);if(0===c.length)return!1;let e=new d.ResponseCookies(a),f=e.getAll();for(let a of c)e.set(a);for(let a of f)e.set(a);return!0}class l{static wrap(a,b){let c=new d.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let g=[],h=new Set,j=()=>{let a=f.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=!0),g=c.getAll().filter(a=>h.has(a.name)),b){let a=[];for(let b of g){let c=new d.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},k=new Proxy(c,{get(a,b,c){switch(b){case i:return g;case"delete":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),k}finally{j()}};case"set":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),k}finally{j()}};default:return e.ReflectAdapter.get(a,b,c)}}});return k}}function m(a){let b=new Proxy(a.mutableCookies,{get(c,d,f){switch(d){case"delete":return function(...d){return o(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return o(a,"cookies().set"),c.set(...d),b};default:return e.ReflectAdapter.get(c,d,f)}}});return b}function n(a){return"action"===a.phase}function o(a,b){if(!n(a))throw new g}function p(a){let b=new d.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var b=require("../../../../webpack-runtime.js");b.C(a);var c=b.X(0,[777],()=>b(b.s=5065));module.exports=c})();